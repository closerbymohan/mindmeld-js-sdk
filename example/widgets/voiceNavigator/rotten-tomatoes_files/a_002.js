(function(){var AK=this,AE=AK._,AG={},AT=Array.prototype,AD=Object.prototype,AP=Function.prototype,AX=AT.push,AJ=AT.slice,AV=AT.concat,AM=AD.toString,AS=AD.hasOwnProperty,AF=AT.forEach,AI=AT.map,AC=AT.reduce,AQ=AT.reduceRight,AR=AT.filter,AU=AT.every,AL=AT.some,Z=AT.indexOf,AW=AT.lastIndexOf,AA=Array.isArray,AY=Object.keys,AO=AP.bind,AB=function(A){return A instanceof AB?A:this instanceof AB?(this._wrapped=A,void 0):new AB(A);
};
"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=AB),exports._=AB):AK._=AB,AB.VERSION="1.4.3";
var X=AB.each=AB.forEach=function(I,E,F){if(null!=I){if(AF&&I.forEach===AF){I.forEach(E,F);
}else{if(I.length===+I.length){for(var B=0,D=I.length;
D>B;
B++){if(E.call(F,I[B],B,I)===AG){return ;
}}}else{for(var A in I){if(AB.has(I,A)&&E.call(F,I[A],A,I)===AG){return ;
}}}}}};
AB.map=AB.collect=function(E,A,B){var D=[];
return null==E?D:AI&&E.map===AI?E.map(A,B):(X(E,function(M,F,I){D[D.length]=A.call(B,M,F,I);
}),D);
};
var J="Reduce of empty array with no initial value";
AB.reduce=AB.foldl=AB.inject=function(F,B,D,E){var A=arguments.length>2;
if(null==F&&(F=[]),AC&&F.reduce===AC){return E&&(B=AB.bind(B,E)),A?F.reduce(B,D):F.reduce(B);
}if(X(F,function(N,M,I){A?D=B.call(E,D,N,M,I):(D=N,A=!0);
}),!A){throw new TypeError(J);
}return D;
},AB.reduceRight=AB.foldr=function(M,E,F,I){var B=arguments.length>2;
if(null==M&&(M=[]),AQ&&M.reduceRight===AQ){return I&&(E=AB.bind(E,I)),B?M.reduceRight(E,F):M.reduceRight(E);
}var D=M.length;
if(D!==+D){var A=AB.keys(M);
D=A.length;
}if(X(M,function(O,R,N){R=A?A[--D]:--D,B?F=E.call(I,F,M[R],R,N):(F=M[R],B=!0);
}),!B){throw new TypeError(J);
}return F;
},AB.find=AB.detect=function(E,A,B){var D;
return U(E,function(M,F,I){return A.call(B,M,F,I)?(D=M,!0):void 0;
}),D;
},AB.filter=AB.select=function(E,A,B){var D=[];
return null==E?D:AR&&E.filter===AR?E.filter(A,B):(X(E,function(M,F,I){A.call(B,M,F,I)&&(D[D.length]=M);
}),D);
},AB.reject=function(D,A,B){return AB.filter(D,function(I,F,E){return !A.call(B,I,F,E);
},B);
},AB.every=AB.all=function(E,B,D){B||(B=AB.identity);
var A=!0;
return null==E?A:AU&&E.every===AU?E.every(B,D):(X(E,function(M,I,F){return(A=A&&B.call(D,M,I,F))?void 0:AG;
}),!!A);
};
var U=AB.some=AB.any=function(E,B,D){B||(B=AB.identity);
var A=!1;
return null==E?A:AL&&E.some===AL?E.some(B,D):(X(E,function(M,I,F){return A||(A=B.call(D,M,I,F))?AG:void 0;
}),!!A);
};
AB.contains=AB.include=function(B,A){return null==B?!1:Z&&B.indexOf===Z?-1!=B.indexOf(A):U(B,function(D){return D===A;
});
},AB.invoke=function(D,A){var B=AJ.call(arguments,2);
return AB.map(D,function(E){return(AB.isFunction(A)?A:E[A]).apply(E,B);
});
},AB.pluck=function(B,A){return AB.map(B,function(D){return D[A];
});
},AB.where=function(B,A){return AB.isEmpty(A)?[]:AB.filter(B,function(E){for(var D in A){if(A[D]!==E[D]){return !1;
}}return !0;
});
},AB.max=function(E,A,B){if(!A&&AB.isArray(E)&&E[0]===+E[0]&&65535>E.length){return Math.max.apply(Math,E);
}if(!A&&AB.isEmpty(E)){return -1/0;
}var D={computed:-1/0,value:-1/0};
return X(E,function(N,I,M){var F=A?A.call(B,N,I,M):N;
F>=D.computed&&(D={value:N,computed:F});
}),D.value;
},AB.min=function(E,A,B){if(!A&&AB.isArray(E)&&E[0]===+E[0]&&65535>E.length){return Math.min.apply(Math,E);
}if(!A&&AB.isEmpty(E)){return 1/0;
}var D={computed:1/0,value:1/0};
return X(E,function(N,I,M){var F=A?A.call(B,N,I,M):N;
D.computed>F&&(D={value:N,computed:F});
}),D.value;
},AB.shuffle=function(E){var A,B=0,D=[];
return X(E,function(F){A=AB.random(B++),D[B-1]=D[A],D[A]=F;
}),D;
};
var Q=function(A){return AB.isFunction(A)?A:function(B){return B[A];
};
};
AB.sortBy=function(E,A,B){var D=Q(A);
return AB.pluck(AB.map(E,function(M,I,F){return{value:M,index:I,criteria:D.call(B,M,I,F)};
}).sort(function(N,F){var I=N.criteria,M=F.criteria;
if(I!==M){if(I>M||void 0===I){return 1;
}if(M>I||void 0===M){return -1;
}}return N.index<F.index?-1:1;
}),"value");
};
var AN=function(I,D,E,F){var A={},B=Q(D||AB.identity);
return X(I,function(N,M){var O=B.call(E,N,M,I);
F(A,O,N);
}),A;
};
AB.groupBy=function(D,A,B){return AN(D,A,B,function(I,E,F){(AB.has(I,E)?I[E]:I[E]=[]).push(F);
});
},AB.countBy=function(D,A,B){return AN(D,A,B,function(F,E){AB.has(F,E)||(F[E]=0),F[E]++;
});
},AB.sortedIndex=function(N,E,F,I){F=null==F?AB.identity:Q(F);
for(var B=F.call(I,E),D=0,A=N.length;
A>D;
){var M=D+A>>>1;
B>F.call(I,N[M])?D=M+1:A=M;
}return D;
},AB.toArray=function(A){return A?AB.isArray(A)?AJ.call(A):A.length===+A.length?AB.map(A,AB.identity):AB.values(A):[];
},AB.size=function(A){return null==A?0:A.length===+A.length?A.length:AB.keys(A).length;
},AB.first=AB.head=AB.take=function(D,A,B){return null==D?void 0:null==A||B?D[0]:AJ.call(D,0,A);
},AB.initial=function(D,A,B){return AJ.call(D,0,D.length-(null==A||B?1:A));
},AB.last=function(D,A,B){return null==D?void 0:null==A||B?D[D.length-1]:AJ.call(D,Math.max(D.length-A,0));
},AB.rest=AB.tail=AB.drop=function(D,A,B){return AJ.call(D,null==A||B?1:A);
},AB.compact=function(A){return AB.filter(A,AB.identity);
};
var H=function(D,A,B){return X(D,function(E){AB.isArray(E)?A?AX.apply(B,E):H(E,A,B):B.push(E);
}),B;
};
AB.flatten=function(B,A){return H(B,A,[]);
},AB.without=function(A){return AB.difference(A,AJ.call(arguments,1));
},AB.uniq=AB.unique=function(M,E,F,I){AB.isFunction(E)&&(I=F,F=E,E=!1);
var B=F?AB.map(M,F,I):M,D=[],A=[];
return X(B,function(N,O){(E?O&&A[A.length-1]===N:AB.contains(A,N))||(A.push(N),D.push(M[O]));
}),D;
},AB.union=function(){return AB.uniq(AV.apply(AT,arguments));
},AB.intersection=function(B){var A=AJ.call(arguments,1);
return AB.filter(AB.uniq(B),function(D){return AB.every(A,function(E){return AB.indexOf(E,D)>=0;
});
});
},AB.difference=function(B){var A=AV.apply(AT,AJ.call(arguments,1));
return AB.filter(B,function(D){return !AB.contains(A,D);
});
},AB.zip=function(){for(var E=AJ.call(arguments),A=AB.max(AB.pluck(E,"length")),B=Array(A),D=0;
A>D;
D++){B[D]=AB.pluck(E,""+D);
}return B;
},AB.object=function(F,B){if(null==F){return{};
}for(var D={},E=0,A=F.length;
A>E;
E++){B?D[F[E]]=B[E]:D[F[E][0]]=F[E][1];
}return D;
},AB.indexOf=function(F,B,D){if(null==F){return -1;
}var E=0,A=F.length;
if(D){if("number"!=typeof D){return E=AB.sortedIndex(F,B),F[E]===B?E:-1;
}E=0>D?Math.max(0,A+D):D;
}if(Z&&F.indexOf===Z){return F.indexOf(B,D);
}for(;
A>E;
E++){if(F[E]===B){return E;
}}return -1;
},AB.lastIndexOf=function(F,B,D){if(null==F){return -1;
}var E=null!=D;
if(AW&&F.lastIndexOf===AW){return E?F.lastIndexOf(B,D):F.lastIndexOf(B);
}for(var A=E?D:F.length;
A--;
){if(F[A]===B){return A;
}}return -1;
},AB.range=function(I,D,E){1>=arguments.length&&(D=I||0,I=0),E=arguments[2]||1;
for(var F=Math.max(Math.ceil((D-I)/E),0),A=0,B=Array(F);
F>A;
){B[A++]=I,I+=E;
}return B;
};
var P=function(){};
AB.bind=function(E,A){var B,D;
if(E.bind===AO&&AO){return AO.apply(E,AJ.call(arguments,1));
}if(!AB.isFunction(E)){throw new TypeError;
}return B=AJ.call(arguments,2),D=function(){if(!(this instanceof D)){return E.apply(A,B.concat(AJ.call(arguments)));
}P.prototype=E.prototype;
var F=new P;
P.prototype=null;
var I=E.apply(F,B.concat(AJ.call(arguments)));
return Object(I)===I?I:F;
};
},AB.bindAll=function(B){var A=AJ.call(arguments,1);
return 0==A.length&&(A=AB.functions(B)),X(A,function(D){B[D]=AB.bind(B[D],B);
}),B;
},AB.memoize=function(D,A){var B={};
return A||(A=AB.identity),function(){var E=A.apply(this,arguments);
return AB.has(B,E)?B[E]:B[E]=D.apply(this,arguments);
};
},AB.delay=function(D,A){var B=AJ.call(arguments,2);
return setTimeout(function(){return D.apply(null,B);
},A);
},AB.defer=function(A){return AB.delay.apply(AB,[A,1].concat(AJ.call(arguments,1)));
},AB.throttle=function(N,E){var F,I,B,D,A=0,M=function(){A=new Date,B=null,D=N.apply(F,I);
};
return function(){var R=new Date,O=E-(R-A);
return F=this,I=arguments,0>=O?(clearTimeout(B),B=null,A=R,D=N.apply(F,I)):B||(B=setTimeout(M,O)),D;
};
},AB.debounce=function(F,B,D){var E,A;
return function(){var M=this,I=arguments,N=function(){E=null,D||(A=F.apply(M,I));
},O=D&&!E;
return clearTimeout(E),E=setTimeout(N,B),O&&(A=F.apply(M,I)),A;
};
},AB.once=function(D){var A,B=!1;
return function(){return B?A:(B=!0,A=D.apply(this,arguments),D=null,A);
};
},AB.wrap=function(B,A){return function(){var D=[B];
return AX.apply(D,arguments),A.apply(this,D);
};
},AB.compose=function(){var A=arguments;
return function(){for(var B=arguments,D=A.length-1;
D>=0;
D--){B=[A[D].apply(this,B)];
}return B[0];
};
},AB.after=function(B,A){return 0>=B?A():function(){return 1>--B?A.apply(this,arguments):void 0;
};
},AB.keys=AY||function(D){if(D!==Object(D)){throw new TypeError("Invalid object");
}var A=[];
for(var B in D){AB.has(D,B)&&(A[A.length]=B);
}return A;
},AB.values=function(D){var A=[];
for(var B in D){AB.has(D,B)&&A.push(D[B]);
}return A;
},AB.pairs=function(D){var A=[];
for(var B in D){AB.has(D,B)&&A.push([B,D[B]]);
}return A;
},AB.invert=function(D){var A={};
for(var B in D){AB.has(D,B)&&(A[D[B]]=B);
}return A;
},AB.functions=AB.methods=function(D){var A=[];
for(var B in D){AB.isFunction(D[B])&&A.push(B);
}return A.sort();
},AB.extend=function(A){return X(AJ.call(arguments,1),function(B){if(B){for(var D in B){A[D]=B[D];
}}}),A;
},AB.pick=function(D){var A={},B=AV.apply(AT,AJ.call(arguments,1));
return X(B,function(E){E in D&&(A[E]=D[E]);
}),A;
},AB.omit=function(E){var B={},D=AV.apply(AT,AJ.call(arguments,1));
for(var A in E){AB.contains(D,A)||(B[A]=E[A]);
}return B;
},AB.defaults=function(A){return X(AJ.call(arguments,1),function(B){if(B){for(var D in B){null==A[D]&&(A[D]=B[D]);
}}}),A;
},AB.clone=function(A){return AB.isObject(A)?AB.isArray(A)?A.slice():AB.extend({},A):A;
},AB.tap=function(B,A){return A(B),B;
};
var G=function(D,R,A,I){if(D===R){return 0!==D||1/D==1/R;
}if(null==D||null==R){return D===R;
}D instanceof AB&&(D=D._wrapped),R instanceof AB&&(R=R._wrapped);
var O=AM.call(D);
if(O!=AM.call(R)){return !1;
}switch(O){case"[object String]":return D==R+"";
case"[object Number]":return D!=+D?R!=+R:0==D?1/D==1/R:D==+R;
case"[object Date]":case"[object Boolean]":return +D==+R;
case"[object RegExp]":return D.source==R.source&&D.global==R.global&&D.multiline==R.multiline&&D.ignoreCase==R.ignoreCase;
}if("object"!=typeof D||"object"!=typeof R){return !1;
}for(var E=A.length;
E--;
){if(A[E]==D){return I[E]==R;
}}A.push(D),I.push(R);
var N=0,B=!0;
if("[object Array]"==O){if(N=D.length,B=N==R.length){for(;
N--&&(B=G(D[N],R[N],A,I));
){}}}else{var M=D.constructor,F=R.constructor;
if(M!==F&&!(AB.isFunction(M)&&M instanceof M&&AB.isFunction(F)&&F instanceof F)){return !1;
}for(var S in D){if(AB.has(D,S)&&(N++,!(B=AB.has(R,S)&&G(D[S],R[S],A,I)))){break;
}}if(B){for(S in R){if(AB.has(R,S)&&!N--){break;
}}B=!N;
}}return A.pop(),I.pop(),B;
};
AB.isEqual=function(B,A){return G(B,A,[],[]);
},AB.isEmpty=function(B){if(null==B){return !0;
}if(AB.isArray(B)||AB.isString(B)){return 0===B.length;
}for(var A in B){if(AB.has(B,A)){return !1;
}}return !0;
},AB.isElement=function(A){return !(!A||1!==A.nodeType);
},AB.isArray=AA||function(A){return"[object Array]"==AM.call(A);
},AB.isObject=function(A){return A===Object(A);
},X(["Arguments","Function","String","Number","Date","RegExp"],function(A){AB["is"+A]=function(B){return AM.call(B)=="[object "+A+"]";
};
}),AB.isArguments(arguments)||(AB.isArguments=function(A){return !(!A||!AB.has(A,"callee"));
}),AB.isFunction=function(A){return"function"==typeof A;
},AB.isFinite=function(A){return isFinite(A)&&!isNaN(parseFloat(A));
},AB.isNaN=function(A){return AB.isNumber(A)&&A!=+A;
},AB.isBoolean=function(A){return A===!0||A===!1||"[object Boolean]"==AM.call(A);
},AB.isNull=function(A){return null===A;
},AB.isUndefined=function(A){return void 0===A;
},AB.has=function(B,A){return AS.call(B,A);
},AB.noConflict=function(){return AK._=AE,this;
},AB.identity=function(A){return A;
},AB.times=function(F,B,D){for(var E=Array(F),A=0;
F>A;
A++){E[A]=B.call(D,A);
}return E;
},AB.random=function(B,A){return null==A&&(A=B,B=0),B+(0|Math.random()*(A-B+1));
};
var C={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};
C.unescape=AB.invert(C.escape);
var L={escape:RegExp("["+AB.keys(C.escape).join("")+"]","g"),unescape:RegExp("("+AB.keys(C.unescape).join("|")+")","g")};
AB.each(["escape","unescape"],function(A){AB[A]=function(B){return null==B?"":(""+B).replace(L[A],function(D){return C[A][D];
});
};
}),AB.result=function(D,A){if(null==D){return null;
}var B=D[A];
return AB.isFunction(B)?B.call(D):B;
},AB.mixin=function(A){X(AB.functions(A),function(B){var D=AB[B]=A[B];
AB.prototype[B]=function(){var E=[this._wrapped];
return AX.apply(E,arguments),Y.call(this,D.apply(AB,E));
};
});
};
var K=0;
AB.uniqueId=function(B){var A=""+ ++K;
return B?B+A:A;
},AB.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};
var AH=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\t|\u2028|\u2029/g;
AB.template=function(D,O,A){A=AB.defaults({},A,AB.templateSettings);
var F=RegExp([(A.escape||AH).source,(A.interpolate||AH).source,(A.evaluate||AH).source].join("|")+"|$","g"),N=0,E="__p+='";
D.replace(F,function(S,T,b,R,c){return E+=D.slice(N,c).replace(V,function(a){return"\\"+W[a];
}),T&&(E+="'+\n((__t=("+T+"))==null?'':_.escape(__t))+\n'"),b&&(E+="'+\n((__t=("+b+"))==null?'':__t)+\n'"),R&&(E+="';\n"+R+"\n__p+='"),N=c+S.length,S;
}),E+="';\n",A.variable||(E="with(obj||{}){\n"+E+"}\n"),E="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+E+"return __p;\n";
try{var M=Function(A.variable||"obj","_",E);
}catch(B){throw B.source=E,B;
}if(O){return M(O,AB);
}var I=function(R){return M.call(this,R,AB);
};
return I.source="function("+(A.variable||"obj")+"){\n"+E+"}",I;
},AB.chain=function(A){return AB(A).chain();
};
var Y=function(A){return this._chain?AB(A).chain():A;
};
AB.mixin(AB),X(["pop","push","reverse","shift","sort","splice","unshift"],function(B){var A=AT[B];
AB.prototype[B]=function(){var D=this._wrapped;
return A.apply(D,arguments),"shift"!=B&&"splice"!=B||0!==D.length||delete D[0],Y.call(this,D);
};
}),X(["concat","join","slice"],function(B){var A=AT[B];
AB.prototype[B]=function(){return Y.call(this,A.apply(this._wrapped,arguments));
};
}),AB.extend(AB.prototype,{chain:function(){return this._chain=!0,this;
},value:function(){return this._wrapped;
}});
}).call(this);




(function(){var AC=this;
var AQ=AC.Backbone;
var AM=[];
var AE=AM.push;
var AD=AM.slice;
var AH=AM.splice;
var AU;
if(typeof exports!=="undefined"){AU=exports;
}else{AU=AC.Backbone={};
}AU.VERSION="1.0.0";
var AN=AC._;
if(!AN&&typeof require!=="undefined"){AN=require("underscore");
}AU.$=AC.jQuery||AC.Zepto||AC.ender||AC.$;
AU.noConflict=function(){AC.Backbone=AQ;
return this;
};
AU.emulateHTTP=false;
AU.emulateJSON=false;
var AG=AU.Events={on:function(C,H,A){if(!AJ(this,"on",C,[H,A])||!H){return this;
}this._events||(this._events={});
var E=this._events[C]||(this._events[C]=[]);
E.push({callback:H,context:A,ctx:A||this});
return this;
},once:function(C,I,A){if(!AJ(this,"once",C,[I,A])||!I){return this;
}var H=this;
var E=AN.once(function(){H.off(C,E);
I.apply(this,arguments);
});
E._callback=I;
return this.on(C,E,A);
},off:function(S,N,H){var A,T,E,P,C,R,O,I;
if(!this._events||!AJ(this,"off",S,[N,H])){return this;
}if(!S&&!N&&!H){this._events={};
return this;
}P=S?[S]:AN.keys(this._events);
for(C=0,R=P.length;
C<R;
C++){S=P[C];
if(E=this._events[S]){this._events[S]=A=[];
if(N||H){for(O=0,I=E.length;
O<I;
O++){T=E[O];
if(N&&N!==T.callback&&N!==T.callback._callback||H&&H!==T.context){A.push(T);
}}}if(!A.length){delete this._events[S];
}}}return this;
},trigger:function(C){if(!this._events){return this;
}var H=AD.call(arguments,1);
if(!AJ(this,"trigger",C,H)){return this;
}var A=this._events[C];
var E=this._events.all;
if(A){AS(A,H);
}if(E){AS(E,arguments);
}return this;
},stopListening:function(C,I,A){var H=this._listeners;
if(!H){return this;
}var E=!I&&!A;
if(typeof I==="object"){A=this;
}if(C){(H={})[C._listenerId]=C;
}for(var N in H){H[N].off(I,A,this);
if(E){delete this._listeners[N];
}}return this;
}};
var AB=/\s+/;
var AJ=function(E,O,C,N){if(!C){return true;
}if(typeof C==="object"){for(var I in C){E[O].apply(E,[I,C[I]].concat(N));
}return false;
}if(AB.test(C)){var P=C.split(AB);
for(var A=0,H=P.length;
A<H;
A++){E[O].apply(E,[P[A]].concat(N));
}return false;
}return true;
};
var AS=function(E,O){var C,N=-1,I=E.length,P=O[0],A=O[1],H=O[2];
switch(O.length){case 0:while(++N<I){(C=E[N]).callback.call(C.ctx);
}return ;
case 1:while(++N<I){(C=E[N]).callback.call(C.ctx,P);
}return ;
case 2:while(++N<I){(C=E[N]).callback.call(C.ctx,P,A);
}return ;
case 3:while(++N<I){(C=E[N]).callback.call(C.ctx,P,A,H);
}return ;
default:while(++N<I){(C=E[N]).callback.apply(C.ctx,O);
}}};
var AP={listenTo:"on",listenToOnce:"once"};
AN.each(AP,function(A,C){AG[C]=function(N,E,I){var H=this._listeners||(this._listeners={});
var O=N._listenerId||(N._listenerId=AN.uniqueId("l"));
H[O]=N;
if(typeof E==="object"){I=this;
}N[A](E,I,this);
return this;
};
});
AG.bind=AG.on;
AG.unbind=AG.off;
AN.extend(AU,AG);
var AR=AU.Model=function(C,H){var A;
var E=C||{};
H||(H={});
this.cid=AN.uniqueId("c");
this.attributes={};
AN.extend(this,AN.pick(H,AF));
if(H.parse){E=this.parse(E,H)||{};
}if(A=AN.result(this,"defaults")){E=AN.defaults({},E,A);
}this.set(E,H);
this.changed={};
this.initialize.apply(this,arguments);
};
var AF=["url","urlRoot","collection"];
AN.extend(AR.prototype,AG,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(A){return AN.clone(this.attributes);
},sync:function(){return AU.sync.apply(this,arguments);
},get:function(A){return this.attributes[A];
},escape:function(A){return AN.escape(this.get(A));
},has:function(A){return this.get(A)!=null;
},set:function(U,O,I){var A,b,E,S,C,T,H,R;
if(U==null){return this;
}if(typeof U==="object"){b=U;
I=O;
}else{(b={})[U]=O;
}I||(I={});
if(!this._validate(b,I)){return false;
}E=I.unset;
C=I.silent;
S=[];
T=this._changing;
this._changing=true;
if(!T){this._previousAttributes=AN.clone(this.attributes);
this.changed={};
}R=this.attributes,H=this._previousAttributes;
if(this.idAttribute in b){this.id=b[this.idAttribute];
}for(A in b){O=b[A];
if(!AN.isEqual(R[A],O)){S.push(A);
}if(!AN.isEqual(H[A],O)){this.changed[A]=O;
}else{delete this.changed[A];
}E?delete R[A]:R[A]=O;
}if(!C){if(S.length){this._pending=true;
}for(var N=0,P=S.length;
N<P;
N++){this.trigger("change:"+S[N],this,R[S[N]],I);
}}if(T){return this;
}if(!C){while(this._pending){this._pending=false;
this.trigger("change",this,I);
}}this._pending=false;
this._changing=false;
return this;
},unset:function(A,C){return this.set(A,void 0,AN.extend({},C,{unset:true}));
},clear:function(C){var E={};
for(var A in this.attributes){E[A]=void 0;
}return this.set(E,AN.extend({},C,{unset:true}));
},hasChanged:function(A){if(A==null){return !AN.isEmpty(this.changed);
}return AN.has(this.changed,A);
},changedAttributes:function(C){if(!C){return this.hasChanged()?AN.clone(this.changed):false;
}var I,A=false;
var H=this._changing?this._previousAttributes:this.attributes;
for(var E in C){if(AN.isEqual(H[E],I=C[E])){continue;
}(A||(A={}))[E]=I;
}return A;
},previous:function(A){if(A==null||!this._previousAttributes){return null;
}return this._previousAttributes[A];
},previousAttributes:function(){return AN.clone(this._previousAttributes);
},fetch:function(C){C=C?AN.clone(C):{};
if(C.parse===void 0){C.parse=true;
}var E=this;
var A=C.success;
C.success=function(H){if(!E.set(E.parse(H,C),C)){return false;
}if(A){A(E,H,C);
}E.trigger("sync",E,H,C);
};
G(this,C);
return this.sync("read",this,C);
},save:function(P,I,H){var A,R,E,N=this.attributes;
if(P==null||typeof P==="object"){A=P;
H=I;
}else{(A={})[P]=I;
}if(A&&(!H||!H.wait)&&!this.set(A,H)){return false;
}H=AN.extend({validate:true},H);
if(!this._validate(A,H)){return false;
}if(A&&H.wait){this.attributes=AN.extend({},N,A);
}if(H.parse===void 0){H.parse=true;
}var C=this;
var O=H.success;
H.success=function(S){C.attributes=N;
var T=C.parse(S,H);
if(H.wait){T=AN.extend(A||{},T);
}if(AN.isObject(T)&&!C.set(T,H)){return false;
}if(O){O(C,S,H);
}C.trigger("sync",C,S,H);
};
G(this,H);
R=this.isNew()?"create":H.patch?"patch":"update";
if(R==="patch"){H.attrs=A;
}E=this.sync(R,this,H);
if(A&&H.wait){this.attributes=N;
}return E;
},destroy:function(C){C=C?AN.clone(C):{};
var I=this;
var A=C.success;
var H=function(){I.trigger("destroy",I,I.collection,C);
};
C.success=function(N){if(C.wait||I.isNew()){H();
}if(A){A(I,N,C);
}if(!I.isNew()){I.trigger("sync",I,N,C);
}};
if(this.isNew()){C.success();
return false;
}G(this,C);
var E=this.sync("delete",this,C);
if(!C.wait){H();
}return E;
},url:function(){var A=AN.result(this,"urlRoot")||AN.result(this.collection,"url")||B();
if(this.isNew()){return A;
}return A+(A.charAt(A.length-1)==="/"?"":"/")+encodeURIComponent(this.id);
},parse:function(A,C){return A;
},clone:function(){return new this.constructor(this.attributes);
},isNew:function(){return this.id==null;
},isValid:function(A){return this._validate({},AN.extend(A||{},{validate:true}));
},_validate:function(C,E){if(!E.validate||!this.validate){return true;
}C=AN.extend({},this.attributes,C);
var A=this.validationError=this.validate(C,E)||null;
if(!A){return true;
}this.trigger("invalid",this,A,AN.extend(E||{},{validationError:A}));
return false;
}});
var AA=["keys","values","pairs","invert","pick","omit"];
AN.each(AA,function(A){AR.prototype[A]=function(){var C=AD.call(arguments);
C.unshift(this.attributes);
return AN[A].apply(AN,C);
};
});
var AO=AU.Collection=function(A,C){C||(C={});
if(C.url){this.url=C.url;
}if(C.model){this.model=C.model;
}if(C.comparator!==void 0){this.comparator=C.comparator;
}this._reset();
this.initialize.apply(this,arguments);
if(A){this.reset(A,AN.extend({silent:true},C));
}};
var AI={add:true,remove:true,merge:true};
var Z={add:true,merge:false,remove:false};
AN.extend(AO.prototype,AG,{model:AR,initialize:function(){},toJSON:function(A){return this.map(function(C){return C.toJSON(A);
});
},sync:function(){return AU.sync.apply(this,arguments);
},add:function(A,C){return this.set(A,AN.defaults(C||{},Z));
},remove:function(C,I){C=AN.isArray(C)?C.slice():[C];
I||(I={});
var A,H,E,N;
for(A=0,H=C.length;
A<H;
A++){N=this.get(C[A]);
if(!N){continue;
}delete this._byId[N.id];
delete this._byId[N.cid];
E=this.indexOf(N);
this.models.splice(E,1);
this.length--;
if(!I.silent){I.index=E;
N.trigger("remove",N,this,I);
}this._removeReference(N);
}return this;
},set:function(b,O){O=AN.defaults(O||{},AI);
if(O.parse){b=this.parse(b,O);
}if(!AN.isArray(b)){b=b?[b]:[];
}var H,h,S,C,U,E;
var R=O.at;
var N=this.comparator&&R==null&&O.sort!==false;
var P=AN.isString(this.comparator)?this.comparator:null;
var A=[],T=[],I={};
for(H=0,h=b.length;
H<h;
H++){if(!(S=this._prepareModel(b[H],O))){continue;
}if(U=this.get(S)){if(O.remove){I[U.cid]=true;
}if(O.merge){U.set(S.attributes,O);
if(N&&!E&&U.hasChanged(P)){E=true;
}}}else{if(O.add){A.push(S);
S.on("all",this._onModelEvent,this);
this._byId[S.cid]=S;
if(S.id!=null){this._byId[S.id]=S;
}}}}if(O.remove){for(H=0,h=this.length;
H<h;
++H){if(!I[(S=this.models[H]).cid]){T.push(S);
}}if(T.length){this.remove(T,O);
}}if(A.length){if(N){E=true;
}this.length+=A.length;
if(R!=null){AH.apply(this.models,[R,0].concat(A));
}else{AE.apply(this.models,A);
}}if(E){this.sort({silent:true});
}if(O.silent){return this;
}for(H=0,h=A.length;
H<h;
H++){(S=A[H]).trigger("add",S,this,O);
}if(E){this.trigger("sort",this,O);
}return this;
},reset:function(C,H){H||(H={});
for(var A=0,E=this.models.length;
A<E;
A++){this._removeReference(this.models[A]);
}H.previousModels=this.models;
this._reset();
this.add(C,AN.extend({silent:true},H));
if(!H.silent){this.trigger("reset",this,H);
}return this;
},push:function(A,C){A=this._prepareModel(A,C);
this.add(A,AN.extend({at:this.length},C));
return A;
},pop:function(A){var C=this.at(this.length-1);
this.remove(C,A);
return C;
},unshift:function(A,C){A=this._prepareModel(A,C);
this.add(A,AN.extend({at:0},C));
return A;
},shift:function(A){var C=this.at(0);
this.remove(C,A);
return C;
},slice:function(A,C){return this.models.slice(A,C);
},get:function(A){if(A==null){return void 0;
}return this._byId[A.id!=null?A.id:A.cid||A];
},at:function(A){return this.models[A];
},where:function(A,C){if(AN.isEmpty(A)){return C?void 0:[];
}return this[C?"find":"filter"](function(H){for(var E in A){if(A[E]!==H.get(E)){return false;
}}return true;
});
},findWhere:function(A){return this.where(A,true);
},sort:function(A){if(!this.comparator){throw new Error("Cannot sort a set without a comparator");
}A||(A={});
if(AN.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this);
}else{this.models.sort(AN.bind(this.comparator,this));
}if(!A.silent){this.trigger("sort",this,A);
}return this;
},sortedIndex:function(C,H,A){H||(H=this.comparator);
var E=AN.isFunction(H)?H:function(I){return I.get(H);
};
return AN.sortedIndex(this.models,C,E,A);
},pluck:function(A){return AN.invoke(this.models,"get",A);
},fetch:function(C){C=C?AN.clone(C):{};
if(C.parse===void 0){C.parse=true;
}var E=C.success;
var A=this;
C.success=function(I){var H=C.reset?"reset":"set";
A[H](I,C);
if(E){E(A,I,C);
}A.trigger("sync",A,I,C);
};
G(this,C);
return this.sync("read",this,C);
},create:function(C,H){H=H?AN.clone(H):{};
if(!(C=this._prepareModel(C,H))){return false;
}if(!H.wait){this.add(C,H);
}var A=this;
var E=H.success;
H.success=function(I){if(H.wait){A.add(C,H);
}if(E){E(C,I,H);
}};
C.save(null,H);
return C;
},parse:function(A,C){return A;
},clone:function(){return new this.constructor(this.models);
},_reset:function(){this.length=0;
this.models=[];
this._byId={};
},_prepareModel:function(C,E){if(C instanceof AR){if(!C.collection){C.collection=this;
}return C;
}E||(E={});
E.collection=this;
var A=new this.model(C,E);
if(!A._validate(C,E)){this.trigger("invalid",this,C,E);
return false;
}return A;
},_removeReference:function(A){if(this===A.collection){delete A.collection;
}A.off("all",this._onModelEvent,this);
},_onModelEvent:function(C,H,A,E){if((C==="add"||C==="remove")&&A!==this){return ;
}if(C==="destroy"){this.remove(H,E);
}if(H&&C==="change:"+H.idAttribute){delete this._byId[H.previous(H.idAttribute)];
if(H.id!=null){this._byId[H.id]=H;
}}this.trigger.apply(this,arguments);
}});
var AV=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];
AN.each(AV,function(A){AO.prototype[A]=function(){var C=AD.call(arguments);
C.unshift(this.models);
return AN[A].apply(AN,C);
};
});
var z=["groupBy","countBy","sortBy"];
AN.each(z,function(A){AO.prototype[A]=function(H,C){var E=AN.isFunction(H)?H:function(I){return I.get(H);
};
return AN[A](this.models,E,C);
};
});
var AT=AU.View=function(A){this.cid=AN.uniqueId("view");
this._configure(A||{});
this._ensureElement();
this.initialize.apply(this,arguments);
this.delegateEvents();
};
var q=/^(\S+)\s*(.*)$/;
var V=["model","collection","el","id","attributes","className","tagName","events"];
AN.extend(AT.prototype,AG,{tagName:"div",$:function(A){return this.$el.find(A);
},initialize:function(){},render:function(){return this;
},remove:function(){this.$el.remove();
this.stopListening();
return this;
},setElement:function(A,C){if(this.$el){this.undelegateEvents();
}this.$el=A instanceof AU.$?A:AU.$(A);
this.el=this.$el[0];
if(C!==false){this.delegateEvents();
}return this;
},delegateEvents:function(C){if(!(C||(C=AN.result(this,"events")))){return this;
}this.undelegateEvents();
for(var I in C){var A=C[I];
if(!AN.isFunction(A)){A=this[C[I]];
}if(!A){continue;
}var H=I.match(q);
var E=H[1],N=H[2];
A=AN.bind(A,this);
E+=".delegateEvents"+this.cid;
if(N===""){this.$el.on(E,A);
}else{this.$el.on(E,N,A);
}}return this;
},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);
return this;
},_configure:function(A){if(this.options){A=AN.extend({},AN.result(this,"options"),A);
}AN.extend(this,AN.pick(A,V));
this.options=A;
},_ensureElement:function(){if(!this.el){var A=AN.extend({},AN.result(this,"attributes"));
if(this.id){A.id=AN.result(this,"id");
}if(this.className){A["class"]=AN.result(this,"className");
}var C=AU.$("<"+AN.result(this,"tagName")+">").attr(A);
this.setElement(C,false);
}else{this.setElement(AN.result(this,"el"),false);
}}});
AU.sync=function(C,I,A){var H=AK[C];
AN.defaults(A||(A={}),{emulateHTTP:AU.emulateHTTP,emulateJSON:AU.emulateJSON});
var E={type:H,dataType:"json"};
if(!A.url){E.url=AN.result(I,"url")||B();
}if(A.data==null&&I&&(C==="create"||C==="update"||C==="patch")){E.contentType="application/json";
E.data=JSON.stringify(A.attrs||I.toJSON(A));
}if(A.emulateJSON){E.contentType="application/x-www-form-urlencoded";
E.data=E.data?{model:E.data}:{};
}if(A.emulateHTTP&&(H==="PUT"||H==="DELETE"||H==="PATCH")){E.type="POST";
if(A.emulateJSON){E.data._method=H;
}var O=A.beforeSend;
A.beforeSend=function(P){P.setRequestHeader("X-HTTP-Method-Override",H);
if(O){return O.apply(this,arguments);
}};
}if(E.type!=="GET"&&!A.emulateJSON){E.processData=false;
}if(E.type==="PATCH"&&window.ActiveXObject&&!(window.external&&window.external.msActiveXFilteringEnabled)){E.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP");
};
}var N=A.xhr=AU.ajax(AN.extend(E,A));
I.trigger("request",I,N,A);
return N;
};
var AK={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};
AU.ajax=function(){return AU.$.ajax.apply(AU.$,arguments);
};
var F=AU.Router=function(A){A||(A={});
if(A.routes){this.routes=A.routes;
}this._bindRoutes();
this.initialize.apply(this,arguments);
};
var Y=/\((.*?)\)/g;
var D=/(\(\?)?:\w+/g;
var Q=/\*\w+/g;
var X=/[\-{}\[\]+?.,\\\^$|#\s]/g;
AN.extend(F.prototype,AG,{initialize:function(){},route:function(C,H,A){if(!AN.isRegExp(C)){C=this._routeToRegExp(C);
}if(AN.isFunction(H)){A=H;
H="";
}if(!A){A=this[H];
}var E=this;
AU.history.route(C,function(I){var N=E._extractParameters(C,I);
A&&A.apply(E,N);
E.trigger.apply(E,["route:"+H].concat(N));
E.trigger("route",H,N);
AU.history.trigger("route",E,H,N);
});
return this;
},navigate:function(A,C){AU.history.navigate(A,C);
return this;
},_bindRoutes:function(){if(!this.routes){return ;
}this.routes=AN.result(this,"routes");
var A,C=AN.keys(this.routes);
while((A=C.pop())!=null){this.route(A,this.routes[A]);
}},_routeToRegExp:function(A){A=A.replace(X,"\\$&").replace(Y,"(?:$1)?").replace(D,function(C,E){return E?C:"([^/]+)";
}).replace(Q,"(.*?)");
return new RegExp("^"+A+"$");
},_extractParameters:function(C,E){var A=C.exec(E).slice(1);
return AN.map(A,function(H){return H?decodeURIComponent(H):null;
});
}});
var M=AU.History=function(){this.handlers=[];
AN.bindAll(this,"checkUrl");
if(typeof window!=="undefined"){this.location=window.location;
this.history=window.history;
}};
var L=/^[#\/]|\s+$/g;
var J=/^\/+|\/+$/g;
var K=/msie [\w.]+/;
var W=/\/$/;
M.started=false;
AN.extend(M.prototype,AG,{interval:50,getHash:function(A){var C=(A||this).location.href.match(/#(.*)$/);
return C?C[1]:"";
},getFragment:function(C,E){if(C==null){if(this._hasPushState||!this._wantsHashChange||E){C=this.location.pathname;
var A=this.root.replace(W,"");
if(!C.indexOf(A)){C=C.substr(A.length);
}}else{C=this.getHash();
}}return C.replace(L,"");
},start:function(C){if(M.started){throw new Error("Backbone.history has already been started");
}M.started=true;
this.options=AN.extend({},{root:"/"},this.options,C);
this.root=this.options.root;
this._wantsHashChange=this.options.hashChange!==false;
this._wantsPushState=!!this.options.pushState;
this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);
var I=this.getFragment();
var A=document.documentMode;
var H=K.exec(navigator.userAgent.toLowerCase())&&(!A||A<=7);
this.root=("/"+this.root+"/").replace(J,"/");
if(H&&this._wantsHashChange){this.iframe=AU.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;
this.navigate(I);
}if(this._hasPushState){AU.$(window).on("popstate",this.checkUrl);
}else{if(this._wantsHashChange&&"onhashchange" in window&&!H){AU.$(window).on("hashchange",this.checkUrl);
}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval);
}}}this.fragment=I;
var E=this.location;
var N=E.pathname.replace(/[^\/]$/,"$&/")===this.root;
if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!N){this.fragment=this.getFragment(null,true);
this.location.replace(this.root+this.location.search+"#"+this.fragment);
return true;
}else{if(this._wantsPushState&&this._hasPushState&&N&&E.hash){this.fragment=this.getHash().replace(L,"");
this.history.replaceState({},document.title,this.root+this.fragment+E.search);
}}if(!this.options.silent){return this.loadUrl();
}},stop:function(){AU.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);
clearInterval(this._checkUrlInterval);
M.started=false;
},route:function(A,C){this.handlers.unshift({route:A,callback:C});
},checkUrl:function(A){var C=this.getFragment();
if(C===this.fragment&&this.iframe){C=this.getFragment(this.getHash(this.iframe));
}if(C===this.fragment){return false;
}if(this.iframe){this.navigate(C);
}this.loadUrl()||this.loadUrl(this.getHash());
},loadUrl:function(C){var E=this.fragment=this.getFragment(C);
var A=AN.any(this.handlers,function(H){if(H.route.test(E)){H.callback(E);
return true;
}});
return A;
},navigate:function(C,E){if(!M.started){return false;
}if(!E||E===true){E={trigger:E};
}C=this.getFragment(C||"");
if(this.fragment===C){return ;
}this.fragment=C;
var A=this.root+C;
if(this._hasPushState){this.history[E.replace?"replaceState":"pushState"]({},document.title,A);
}else{if(this._wantsHashChange){this._updateHash(this.location,C,E.replace);
if(this.iframe&&C!==this.getFragment(this.getHash(this.iframe))){if(!E.replace){this.iframe.document.open().close();
}this._updateHash(this.iframe.location,C,E.replace);
}}else{return this.location.assign(A);
}}if(E.trigger){this.loadUrl(C);
}},_updateHash:function(C,H,A){if(A){var E=C.href.replace(/(javascript:|#).*$/,"");
C.replace(E+"#"+H);
}else{C.hash="#"+H;
}}});
AU.history=new M;
var AL=function(C,I){var A=this;
var H;
if(C&&AN.has(C,"constructor")){H=C.constructor;
}else{H=function(){return A.apply(this,arguments);
};
}AN.extend(H,A,I);
var E=function(){this.constructor=H;
};
E.prototype=A.prototype;
H.prototype=new E;
if(C){AN.extend(H.prototype,C);
}H.__super__=A.prototype;
return H;
};
AR.extend=AO.extend=F.extend=AT.extend=M.extend=AL;
var B=function(){throw new Error('A "url" property or function must be specified');
};
var G=function(C,E){var A=E.error;
E.error=function(H){if(A){A(C,H,E);
}C.trigger("error",C,H,E);
};
};
}).call(this);




$.elementReady=function(B,A){$(function(){A.call($("#"+B));
});
};
$(document).on("click",".rt_fblogin",function(B){var C=$(this);
var A=$(this).attr("scope");
if(A==undefined){A="email,publish_actions";
}FB.login(function(D){fb_connected.done(function(){if(C.data("redirect")!=undefined){window.location.href=C.data("redirect");
}});
},{scope:A});
});
if(RT.LoginStatusModel!=undefined){console.log("Creating LoginStatusModel - using preload");
RT.LoginStatusModel=new Backbone.Model(RT.LoginStatusModel);
RT.social_init.resolve();
}else{console.log("Creating LoginStatusModel - empty");
RT.LoginStatusModel=new Backbone.Model();
}$(".movie_list").on("mouseup","tr",function(B){var A=$(B.currentTarget).find("a")[0];
if(B.target!=A&&B.which==1){window.top.location=$(A).attr("href");
}else{console.log("no action");
}});
$(function(){var B=$("#top_header_bar");
var A=new RT.Backbone.Views.PageHeader({el:B,model:RT.LoginStatusModel});
B.data("view",A);
});
RT.social_init.done(function(){$.get("/home/wtsbar/").done(function(A){$("#wtsBar").html(A);
});
});




var JSON;
if(!JSON){JSON={};
}(function(){function f(n){return n<10?"0"+n:n;
}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;
};
String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();
};
}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;
return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];
return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
})+'"':'"'+string+'"';
}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);
}if(typeof rep==="function"){value=rep.call(holder,key,value);
}switch(typeof value){case"string":return quote(value);
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null";
}gap+=indent;
partial=[];
if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;
for(i=0;
i<length;
i+=1){partial[i]=str(i,value)||"null";
}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;
return v;
}if(rep&&typeof rep==="object"){length=rep.length;
for(i=0;
i<length;
i+=1){if(typeof rep[i]==="string"){k=rep[i];
v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";
gap=mind;
return v;
}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;
gap="";
indent="";
if(typeof space==="number"){for(i=0;
i<space;
i+=1){indent+=" ";
}}else{if(typeof space==="string"){indent=space;
}}rep=replacer;
if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");
}return str("",{"":value});
};
}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];
if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);
if(v!==undefined){value[k]=v;
}else{delete value[k];
}}}}return reviver.call(holder,key,value);
}text=String(text);
cx.lastIndex=0;
if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
});
}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j;
}throw new SyntaxError("JSON.parse");
};
}}());




/* jQuery UI - v1.10.0 - 2013-01-31
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.button.js, jquery.ui.dialog.js, jquery.ui.slider.js, jquery.ui.tabs.js
* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */
(function(E,B){function A(I,L){var J,H,K,G=I.nodeName.toLowerCase();
return"area"===G?(J=I.parentNode,H=J.name,!I.href||!H||J.nodeName.toLowerCase()!=="map"?!1:(K=E("img[usemap=#"+H+"]")[0],!!K&&C(K))):(/input|select|textarea|button|object/.test(G)?!I.disabled:"a"===G?I.href||L:L)&&C(I);
}function C(G){return E.expr.filters.visible(G)&&!E(G).parents().addBack().filter(function(){return E.css(this,"visibility")==="hidden";
}).length;
}var F=0,D=/^ui-id-\d+$/;
E.ui=E.ui||{};
if(E.ui.version){return ;
}E.extend(E.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),E.fn.extend({_focus:E.fn.focus,focus:function(G,H){return typeof G=="number"?this.each(function(){var I=this;
setTimeout(function(){E(I).focus(),H&&H.call(I);
},G);
}):this._focus.apply(this,arguments);
},scrollParent:function(){var G;
return E.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?G=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(E.css(this,"position"))&&/(auto|scroll)/.test(E.css(this,"overflow")+E.css(this,"overflow-y")+E.css(this,"overflow-x"));
}).eq(0):G=this.parents().filter(function(){return/(auto|scroll)/.test(E.css(this,"overflow")+E.css(this,"overflow-y")+E.css(this,"overflow-x"));
}).eq(0),/fixed/.test(this.css("position"))||!G.length?E(document):G;
},zIndex:function(J){if(J!==B){return this.css("zIndex",J);
}if(this.length){var I=E(this[0]),G,H;
while(I.length&&I[0]!==document){G=I.css("position");
if(G==="absolute"||G==="relative"||G==="fixed"){H=parseInt(I.css("zIndex"),10);
if(!isNaN(H)&&H!==0){return H;
}}I=I.parent();
}}return 0;
},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++F);
});
},removeUniqueId:function(){return this.each(function(){D.test(this.id)&&E(this).removeAttr("id");
});
}}),E.extend(E.expr[":"],{data:E.expr.createPseudo?E.expr.createPseudo(function(G){return function(H){return !!E.data(H,G);
};
}):function(G,I,H){return !!E.data(G,H[3]);
},focusable:function(G){return A(G,!isNaN(E.attr(G,"tabindex")));
},tabbable:function(G){var I=E.attr(G,"tabindex"),H=isNaN(I);
return(H||I>=0)&&A(G,!H);
}}),E("<a>").outerWidth(1).jquery||E.each(["Width","Height"],function(L,J){function G(M,P,O,N){return E.each(H,function(){P-=parseFloat(E.css(M,"padding"+this))||0,O&&(P-=parseFloat(E.css(M,"border"+this+"Width"))||0),N&&(P-=parseFloat(E.css(M,"margin"+this))||0);
}),P;
}var H=J==="Width"?["Left","Right"]:["Top","Bottom"],I=J.toLowerCase(),K={innerWidth:E.fn.innerWidth,innerHeight:E.fn.innerHeight,outerWidth:E.fn.outerWidth,outerHeight:E.fn.outerHeight};
E.fn["inner"+J]=function(M){return M===B?K["inner"+J].call(this):this.each(function(){E(this).css(I,G(this,M)+"px");
});
},E.fn["outer"+J]=function(M,N){return typeof M!="number"?K["outer"+J].call(this,M):this.each(function(){E(this).css(I,G(this,M,!0,N)+"px");
});
};
}),E.fn.addBack||(E.fn.addBack=function(G){return this.add(G==null?this.prevObject:this.prevObject.filter(G));
}),E("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(E.fn.removeData=function(G){return function(H){return arguments.length?G.call(this,E.camelCase(H)):G.call(this);
};
}(E.fn.removeData)),E.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),E.support.selectstart="onselectstart" in document.createElement("div"),E.fn.extend({disableSelection:function(){return this.bind((E.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(G){G.preventDefault();
});
},enableSelection:function(){return this.unbind(".ui-disableSelection");
}}),E.extend(E.ui,{plugin:{add:function(H,K,J){var G,I=E.ui[H].prototype;
for(G in J){I.plugins[G]=I.plugins[G]||[],I.plugins[G].push([K,J[G]]);
}},call:function(J,H,K){var I,G=J.plugins[H];
if(!G||!J.element[0].parentNode||J.element[0].parentNode.nodeType===11){return ;
}for(I=0;
I<G.length;
I++){J.options[G[I][0]]&&G[I][1].apply(J.element,K);
}}},hasScroll:function(H,J){if(E(H).css("overflow")==="hidden"){return !1;
}var I=J&&J==="left"?"scrollLeft":"scrollTop",G=!1;
return H[I]>0?!0:(H[I]=1,G=H[I]>0,H[I]=0,G);
}});
})(jQuery);
(function(D,B){var E=0,C=Array.prototype.slice,A=D.cleanData;
D.cleanData=function(F){for(var I=0,H;
(H=F[I])!=null;
I++){try{D(H).triggerHandler("remove");
}catch(G){}}A(F);
},D.widget=function(M,H,F){var I,N,G,L,K={},J=M.split(".")[0];
M=M.split(".")[1],I=J+"-"+M,F||(F=H,H=D.Widget),D.expr[":"][I.toLowerCase()]=function(O){return !!D.data(O,I);
},D[J]=D[J]||{},N=D[J][M],G=D[J][M]=function(P,O){if(!this._createWidget){return new G(P,O);
}arguments.length&&this._createWidget(P,O);
},D.extend(G,N,{version:F.version,_proto:D.extend({},F),_childConstructors:[]}),L=new H,L.options=D.widget.extend({},L.options),D.each(F,function(O,P){if(!D.isFunction(P)){K[O]=P;
return ;
}K[O]=function(){var R=function(){return H.prototype[O].apply(this,arguments);
},Q=function(S){return H.prototype[O].apply(this,S);
};
return function(){var S=this._super,U=this._superApply,T;
return this._super=R,this._superApply=Q,T=P.apply(this,arguments),this._super=S,this._superApply=U,T;
};
}();
}),G.prototype=D.widget.extend(L,{widgetEventPrefix:N?L.widgetEventPrefix:M},K,{constructor:G,namespace:J,widgetName:M,widgetFullName:I}),N?(D.each(N._childConstructors,function(O,Q){var P=Q.prototype;
D.widget(P.namespace+"."+P.widgetName,G,Q._proto);
}),delete N._childConstructors):H._childConstructors.push(G),D.widget.bridge(M,G);
},D.widget.extend=function(K){var H=C.call(arguments,1),I=0,J=H.length,G,F;
for(;
I<J;
I++){for(G in H[I]){F=H[I][G],H[I].hasOwnProperty(G)&&F!==B&&(D.isPlainObject(F)?K[G]=D.isPlainObject(K[G])?D.widget.extend({},K[G],F):D.widget.extend({},F):K[G]=F);
}}return K;
},D.widget.bridge=function(H,F){var G=F.prototype.widgetFullName||H;
D.fn[H]=function(L){var J=typeof L=="string",I=C.call(arguments,1),K=this;
return L=!J&&I.length?D.widget.extend.apply(null,[L].concat(I)):L,J?this.each(function(){var N,M=D.data(this,G);
if(!M){return D.error("cannot call methods on "+H+" prior to initialization; "+"attempted to call method '"+L+"'");
}if(!D.isFunction(M[L])||L.charAt(0)==="_"){return D.error("no such method '"+L+"' for "+H+" widget instance");
}N=M[L].apply(M,I);
if(N!==M&&N!==B){return K=N&&N.jquery?K.pushStack(N.get()):N,!1;
}}):this.each(function(){var M=D.data(this,G);
M?M.option(L||{})._init():D.data(this,G,new F(L,this));
}),K;
};
},D.Widget=function(){},D.Widget._childConstructors=[],D.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(F,G){G=D(G||this.defaultElement||this)[0],this.element=D(G),this.uuid=E++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=D.widget.extend({},this.options,this._getCreateOptions(),F),this.bindings=D(),this.hoverable=D(),this.focusable=D(),G!==this&&(D.data(G,this.widgetFullName,this),this._on(!0,this.element,{remove:function(H){H.target===G&&this.destroy();
}}),this.document=D(G.style?G.ownerDocument:G.document||G),this.window=D(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init();
},_getCreateOptions:D.noop,_getCreateEventData:D.noop,_create:D.noop,_init:D.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(D.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus");
},_destroy:D.noop,widget:function(){return this.element;
},option:function(K,I){var G=K,H,J,F;
if(arguments.length===0){return D.widget.extend({},this.options);
}if(typeof K=="string"){G={},H=K.split("."),K=H.shift();
if(H.length){J=G[K]=D.widget.extend({},this.options[K]);
for(F=0;
F<H.length-1;
F++){J[H[F]]=J[H[F]]||{},J=J[H[F]];
}K=H.pop();
if(I===B){return J[K]===B?null:J[K];
}J[K]=I;
}else{if(I===B){return this.options[K]===B?null:this.options[K];
}G[K]=I;
}}return this._setOptions(G),this;
},_setOptions:function(G){var F;
for(F in G){this._setOption(F,G[F]);
}return this;
},_setOption:function(G,F){return this.options[G]=F,G==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!F).attr("aria-disabled",F),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this;
},enable:function(){return this._setOption("disabled",!1);
},disable:function(){return this._setOption("disabled",!0);
},_on:function(G,J,I){var F,H=this;
typeof G!="boolean"&&(I=J,J=G,G=!1),I?(J=F=D(J),this.bindings=this.bindings.add(J)):(I=J,J=this.element,F=this.widget()),D.each(I,function(N,P){function M(){if(!G&&(H.options.disabled===!0||D(this).hasClass("ui-state-disabled"))){return ;
}return(typeof P=="string"?H[P]:P).apply(H,arguments);
}typeof P!="string"&&(M.guid=P.guid=P.guid||M.guid||D.guid++);
var L=N.match(/^(\w+)\s*(.*)$/),O=L[1]+H.eventNamespace,K=L[2];
K?F.delegate(K,O,M):J.bind(O,M);
});
},_off:function(G,F){F=(F||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,G.unbind(F).undelegate(F);
},_delay:function(H,F){function I(){return(typeof H=="string"?G[H]:H).apply(G,arguments);
}var G=this;
return setTimeout(I,F||0);
},_hoverable:function(F){this.hoverable=this.hoverable.add(F),this._on(F,{mouseenter:function(G){D(G.currentTarget).addClass("ui-state-hover");
},mouseleave:function(G){D(G.currentTarget).removeClass("ui-state-hover");
}});
},_focusable:function(F){this.focusable=this.focusable.add(F),this._on(F,{focusin:function(G){D(G.currentTarget).addClass("ui-state-focus");
},focusout:function(G){D(G.currentTarget).removeClass("ui-state-focus");
}});
},_trigger:function(G,K,I){var F,H,J=this.options[G];
I=I||{},K=D.Event(K),K.type=(G===this.widgetEventPrefix?G:this.widgetEventPrefix+G).toLowerCase(),K.target=this.element[0],H=K.originalEvent;
if(H){for(F in H){F in K||(K[F]=H[F]);
}}return this.element.trigger(K,I),!(D.isFunction(J)&&J.apply(this.element[0],[K].concat(I))===!1||K.isDefaultPrevented());
}},D.each({show:"fadeIn",hide:"fadeOut"},function(F,G){D.Widget.prototype["_"+F]=function(K,I,J){typeof I=="string"&&(I={effect:I});
var L,H=I?I===!0||typeof I=="number"?G:I.effect||G:F;
I=I||{},typeof I=="number"&&(I={duration:I}),L=!D.isEmptyObject(I),I.complete=J,I.delay&&K.delay(I.delay),L&&D.effects&&D.effects.effect[H]?K[F](I):H!==F&&K[H]?K[H](I.duration,I.easing,J):K.queue(function(M){D(this)[F](),J&&J.call(K[0]),M();
});
};
});
})(jQuery);
(function(B,A){var C=!1;
B(document).mouseup(function(){C=!1;
}),B.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var D=this;
this.element.bind("mousedown."+this.widgetName,function(E){return D._mouseDown(E);
}).bind("click."+this.widgetName,function(E){if(!0===B.data(E.target,D.widgetName+".preventClickEvent")){return B.removeData(E.target,D.widgetName+".preventClickEvent"),E.stopImmediatePropagation(),!1;
}}),this.started=!1;
},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&B(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);
},_mouseDown:function(E){if(C){return ;
}this._mouseStarted&&this._mouseUp(E),this._mouseDownEvent=E;
var G=this,D=E.which===1,F=typeof this.options.cancel=="string"&&E.target.nodeName?B(E.target).closest(this.options.cancel).length:!1;
if(!D||F||!this._mouseCapture(E)){return !0;
}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){G.mouseDelayMet=!0;
},this.options.delay));
if(this._mouseDistanceMet(E)&&this._mouseDelayMet(E)){this._mouseStarted=this._mouseStart(E)!==!1;
if(!this._mouseStarted){return E.preventDefault(),!0;
}}return !0===B.data(E.target,this.widgetName+".preventClickEvent")&&B.removeData(E.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(H){return G._mouseMove(H);
},this._mouseUpDelegate=function(H){return G._mouseUp(H);
},B(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),E.preventDefault(),C=!0,!0;
},_mouseMove:function(D){return B.ui.ie&&(!document.documentMode||document.documentMode<9)&&!D.button?this._mouseUp(D):this._mouseStarted?(this._mouseDrag(D),D.preventDefault()):(this._mouseDistanceMet(D)&&this._mouseDelayMet(D)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,D)!==!1,this._mouseStarted?this._mouseDrag(D):this._mouseUp(D)),!this._mouseStarted);
},_mouseUp:function(D){return B(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,D.target===this._mouseDownEvent.target&&B.data(D.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(D)),!1;
},_mouseDistanceMet:function(D){return Math.max(Math.abs(this._mouseDownEvent.pageX-D.pageX),Math.abs(this._mouseDownEvent.pageY-D.pageY))>=this.options.distance;
},_mouseDelayMet:function(){return this.mouseDelayMet;
},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return !0;
}});
})(jQuery);
(function(I,N){function G(Q,P,R){return[parseInt(Q[0],10)*(E.test(Q[0])?P/100:1),parseInt(Q[1],10)*(E.test(Q[1])?R/100:1)];
}function B(P,Q){return parseInt(I.css(P,Q),10)||0;
}function J(P){var Q=P[0];
return Q.nodeType===9?{width:P.width(),height:P.height(),offset:{top:0,left:0}}:I.isWindow(Q)?{width:P.width(),height:P.height(),offset:{top:P.scrollTop(),left:P.scrollLeft()}}:Q.preventDefault?{width:0,height:0,offset:{top:Q.pageY,left:Q.pageX}}:{width:P.outerWidth(),height:P.outerHeight(),offset:P.offset()};
}I.ui=I.ui||{};
var D,A=Math.max,F=Math.abs,O=Math.round,C=/left|center|right/,M=/top|center|bottom/,L=/[\+\-]\d+%?/,H=/^\w+/,E=/%$/,K=I.fn.position;
I.position={scrollbarWidth:function(){if(D!==N){return D;
}var R,P,Q=I("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),S=Q.children()[0];
return I("body").append(Q),R=S.offsetWidth,Q.css("overflow","scroll"),P=S.offsetWidth,R===P&&(P=Q[0].clientWidth),Q.remove(),D=R-P;
},getScrollInfo:function(Q){var T=Q.isWindow?"":Q.element.css("overflow-x"),S=Q.isWindow?"":Q.element.css("overflow-y"),P=T==="scroll"||T==="auto"&&Q.width<Q.element[0].scrollWidth,R=S==="scroll"||S==="auto"&&Q.height<Q.element[0].scrollHeight;
return{width:P?I.position.scrollbarWidth():0,height:R?I.position.scrollbarWidth():0};
},getWithinInfo:function(P){var R=I(P||window),Q=I.isWindow(R[0]);
return{element:R,isWindow:Q,offset:R.offset()||{left:0,top:0},scrollLeft:R.scrollLeft(),scrollTop:R.scrollTop(),width:Q?R.width():R.outerWidth(),height:Q?R.height():R.outerHeight()};
}},I.fn.position=function(a){if(!a||!a.of){return K.apply(this,arguments);
}a=I.extend({},a);
var P,R,Z,Q,U,V,W=I(a.of),Y=I.position.getWithinInfo(a.within),c=I.position.getScrollInfo(Y),T=(a.collision||"flip").split(" "),X={};
return V=J(W),W[0].preventDefault&&(a.at="left top"),R=V.width,Z=V.height,Q=V.offset,U=I.extend({},Q),I.each(["my","at"],function(){var b=(a[this]||"").split(" "),d,S;
b.length===1&&(b=C.test(b[0])?b.concat(["center"]):M.test(b[0])?["center"].concat(b):["center","center"]),b[0]=C.test(b[0])?b[0]:"center",b[1]=M.test(b[1])?b[1]:"center",d=L.exec(b[0]),S=L.exec(b[1]),X[this]=[d?d[0]:0,S?S[0]:0],a[this]=[H.exec(b[0])[0],H.exec(b[1])[0]];
}),T.length===1&&(T[1]=T[0]),a.at[0]==="right"?U.left+=R:a.at[0]==="center"&&(U.left+=R/2),a.at[1]==="bottom"?U.top+=Z:a.at[1]==="center"&&(U.top+=Z/2),P=G(X.at,R,Z),U.left+=P[0],U.top+=P[1],this.each(function(){var b,p,n=I(this),h=n.outerWidth(),l=n.outerHeight(),j=B(this,"marginLeft"),m=B(this,"marginTop"),g=h+j+B(this,"marginRight")+c.width,i=l+m+B(this,"marginBottom")+c.height,S=I.extend({},U),e=G(X.my,n.outerWidth(),n.outerHeight());
a.my[0]==="right"?S.left-=h:a.my[0]==="center"&&(S.left-=h/2),a.my[1]==="bottom"?S.top-=l:a.my[1]==="center"&&(S.top-=l/2),S.left+=e[0],S.top+=e[1],I.support.offsetFractions||(S.left=O(S.left),S.top=O(S.top)),b={marginLeft:j,marginTop:m},I.each(["left","top"],function(f,d){I.ui.position[T[f]]&&I.ui.position[T[f]][d](S,{targetWidth:R,targetHeight:Z,elemWidth:h,elemHeight:l,collisionPosition:b,collisionWidth:g,collisionHeight:i,offset:[P[0]+e[0],P[1]+e[1]],my:a.my,at:a.at,within:Y,elem:n});
}),a.using&&(p=function(q){var t=Q.left-S.left,k=t+R-h,r=Q.top-S.top,d=r+Z-l,f={target:{element:W,left:Q.left,top:Q.top,width:R,height:Z},element:{element:n,left:S.left,top:S.top,width:h,height:l},horizontal:k<0?"left":t>0?"right":"center",vertical:d<0?"top":r>0?"bottom":"middle"};
R<h&&F(t+k)<R&&(f.horizontal="center"),Z<l&&F(r+d)<Z&&(f.vertical="middle"),A(F(t),F(k))>A(F(r),F(d))?f.important="horizontal":f.important="vertical",a.using.call(this,q,f);
}),n.offset(I.extend(S,{using:p}));
});
},I.ui.position={fit:{left:function(T,W){var Q=W.within,R=Q.isWindow?Q.scrollLeft:Q.offset.left,X=Q.width,P=T.left-W.collisionPosition.marginLeft,V=R-P,U=P+W.collisionWidth-X-R,S;
W.collisionWidth>X?V>0&&U<=0?(S=T.left+V+W.collisionWidth-X-R,T.left+=V-S):U>0&&V<=0?T.left=R:V>U?T.left=R+X-W.collisionWidth:T.left=R:V>0?T.left+=V:U>0?T.left-=U:T.left=A(T.left-P,T.left);
},top:function(T,W){var Q=W.within,R=Q.isWindow?Q.scrollTop:Q.offset.top,X=W.within.height,P=T.top-W.collisionPosition.marginTop,V=R-P,U=P+W.collisionHeight-X-R,S;
W.collisionHeight>X?V>0&&U<=0?(S=T.top+V+W.collisionHeight-X-R,T.top+=V-S):U>0&&V<=0?T.top=R:V>U?T.top=R+X-W.collisionHeight:T.top=R:V>0?T.top+=V:U>0?T.top-=U:T.top=A(T.top-P,T.top);
}},flip:{left:function(W,g){var S=g.within,P=S.offset.left+S.scrollLeft,i=S.width,R=S.isWindow?S.scrollLeft:S.offset.left,b=W.left-g.collisionPosition.marginLeft,Z=b-R,V=b+g.collisionWidth-i-R,T=g.my[0]==="left"?-g.elemWidth:g.my[0]==="right"?g.elemWidth:0,Y=g.at[0]==="left"?g.targetWidth:g.at[0]==="right"?-g.targetWidth:0,U=-2*g.offset[0],Q,X;
if(Z<0){Q=W.left+T+Y+U+g.collisionWidth-i-P;
if(Q<0||Q<F(Z)){W.left+=T+Y+U;
}}else{if(V>0){X=W.left-g.collisionPosition.marginLeft+T+Y+U-R;
if(X>0||F(X)<V){W.left+=T+Y+U;
}}}},top:function(W,i){var S=i.within,P=S.offset.top+S.scrollTop,j=S.height,R=S.isWindow?S.scrollTop:S.offset.top,g=W.top-i.collisionPosition.marginTop,Z=g-R,V=g+i.collisionHeight-j-R,T=i.my[1]==="top",Y=T?-i.elemHeight:i.my[1]==="bottom"?i.elemHeight:0,U=i.at[1]==="top"?i.targetHeight:i.at[1]==="bottom"?-i.targetHeight:0,Q=-2*i.offset[1],X,b;
Z<0?(b=W.top+Y+U+Q+i.collisionHeight-j-P,W.top+Y+U+Q>Z&&(b<0||b<F(Z))&&(W.top+=Y+U+Q)):V>0&&(X=W.top-i.collisionPosition.marginTop+Y+U+Q-R,W.top+Y+U+Q>V&&(X>0||F(X)<V)&&(W.top+=Y+U+Q));
}},flipfit:{left:function(){I.ui.position.flip.left.apply(this,arguments),I.ui.position.fit.left.apply(this,arguments);
},top:function(){I.ui.position.flip.top.apply(this,arguments),I.ui.position.fit.top.apply(this,arguments);
}}},function(){var R,V,T,Q,S,U=document.getElementsByTagName("body")[0],P=document.createElement("div");
R=document.createElement(U?"div":"body"),T={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},U&&I.extend(T,{position:"absolute",left:"-1000px",top:"-1000px"});
for(S in T){R.style[S]=T[S];
}R.appendChild(P),V=U||document.documentElement,V.insertBefore(R,V.firstChild),P.style.cssText="position: absolute; left: 10.7432222px;",Q=I(P).offset().left,I.support.offsetFractions=Q>10&&Q<11,R.innerHTML="",V.removeChild(R);
}();
})(jQuery);
(function(B,A){B.widget("ui.draggable",B.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit();
},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy();
},_mouseCapture:function(C){var D=this.options;
return this.helper||D.disabled||B(C.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(C),this.handle?(B(D.iframeFix===!0?"iframe":D.iframeFix).each(function(){B("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(B(this).offset()).appendTo("body");
}),!0):!1);
},_mouseStart:function(C){var D=this.options;
return this.helper=this._createHelper(C),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),B.ui.ddmanager&&(B.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},B.extend(this.offset,{click:{left:C.pageX-this.offset.left,top:C.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(C),this.originalPageX=C.pageX,this.originalPageY=C.pageY,D.cursorAt&&this._adjustOffsetFromHelper(D.cursorAt),D.containment&&this._setContainment(),this._trigger("start",C)===!1?(this._clear(),!1):(this._cacheHelperProportions(),B.ui.ddmanager&&!D.dropBehaviour&&B.ui.ddmanager.prepareOffsets(this,C),this._mouseDrag(C,!0),B.ui.ddmanager&&B.ui.ddmanager.dragStart(this,C),!0);
},_mouseDrag:function(C,E){this.position=this._generatePosition(C),this.positionAbs=this._convertPositionTo("absolute");
if(!E){var D=this._uiHash();
if(this._trigger("drag",C,D)===!1){return this._mouseUp({}),!1;
}this.position=D.position;
}if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px";
}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px";
}return B.ui.ddmanager&&B.ui.ddmanager.drag(this,C),!1;
},_mouseStop:function(D){var G,F=this,C=!1,E=!1;
B.ui.ddmanager&&!this.options.dropBehaviour&&(E=B.ui.ddmanager.drop(this,D)),this.dropped&&(E=this.dropped,this.dropped=!1),G=this.element[0];
while(G&&(G=G.parentNode)){G===document&&(C=!0);
}return !C&&this.options.helper==="original"?!1:(this.options.revert==="invalid"&&!E||this.options.revert==="valid"&&E||this.options.revert===!0||B.isFunction(this.options.revert)&&this.options.revert.call(this.element,E)?B(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){F._trigger("stop",D)!==!1&&F._clear();
}):this._trigger("stop",D)!==!1&&this._clear(),!1);
},_mouseUp:function(C){return B("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this);
}),B.ui.ddmanager&&B.ui.ddmanager.dragStop(this,C),B.ui.mouse.prototype._mouseUp.call(this,C);
},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this;
},_getHandle:function(C){var D=!this.options.handle||!B(this.options.handle,this.element).length?!0:!1;
return B(this.options.handle,this.element).find("*").addBack().each(function(){this===C.target&&(D=!0);
}),D;
},_createHelper:function(C){var E=this.options,D=B.isFunction(E.helper)?B(E.helper.apply(this.element[0],[C])):E.helper==="clone"?this.element.clone().removeAttr("id"):this.element;
return D.parents("body").length||D.appendTo(E.appendTo==="parent"?this.element[0].parentNode:E.appendTo),D[0]!==this.element[0]&&!/(fixed|absolute)/.test(D.css("position"))&&D.css("position","absolute"),D;
},_adjustOffsetFromHelper:function(C){typeof C=="string"&&(C=C.split(" ")),B.isArray(C)&&(C={left:+C[0],top:+C[1]||0}),"left" in C&&(this.offset.click.left=C.left+this.margins.left),"right" in C&&(this.offset.click.left=this.helperProportions.width-C.right+this.margins.left),"top" in C&&(this.offset.click.top=C.top+this.margins.top),"bottom" in C&&(this.offset.click.top=this.helperProportions.height-C.bottom+this.margins.top);
},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();
var C=this.offsetParent.offset();
this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&B.contains(this.scrollParent[0],this.offsetParent[0])&&(C.left+=this.scrollParent.scrollLeft(),C.top+=this.scrollParent.scrollTop());
if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&B.ui.ie){C={top:0,left:0};
}return{top:C.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:C.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};
},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var C=this.element.position();
return{top:C.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:C.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};
}return{top:0,left:0};
},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0};
},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};
},_setContainment:function(){var D,F,E,C=this.options;
C.containment==="parent"&&(C.containment=this.helper[0].parentNode);
if(C.containment==="document"||C.containment==="window"){this.containment=[C.containment==="document"?0:B(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,C.containment==="document"?0:B(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(C.containment==="document"?0:B(window).scrollLeft())+B(C.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(C.containment==="document"?0:B(window).scrollTop())+(B(C.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];
}if(!/^(document|window|parent)$/.test(C.containment)&&C.containment.constructor!==Array){F=B(C.containment),E=F[0];
if(!E){return ;
}D=B(E).css("overflow")!=="hidden",this.containment=[(parseInt(B(E).css("borderLeftWidth"),10)||0)+(parseInt(B(E).css("paddingLeft"),10)||0),(parseInt(B(E).css("borderTopWidth"),10)||0)+(parseInt(B(E).css("paddingTop"),10)||0),(D?Math.max(E.scrollWidth,E.offsetWidth):E.offsetWidth)-(parseInt(B(E).css("borderLeftWidth"),10)||0)-(parseInt(B(E).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(D?Math.max(E.scrollHeight,E.offsetHeight):E.offsetHeight)-(parseInt(B(E).css("borderTopWidth"),10)||0)-(parseInt(B(E).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=F;
}else{C.containment.constructor===Array&&(this.containment=C.containment);
}},_convertPositionTo:function(D,G){G||(G=this.position);
var F=D==="absolute"?1:-1,C=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!B.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,E=/(html|body)/i.test(C[0].tagName);
return{top:G.top+this.offset.relative.top*F+this.offset.parent.top*F-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():E?0:C.scrollTop())*F,left:G.left+this.offset.relative.left*F+this.offset.parent.left*F-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():E?0:C.scrollLeft())*F};
},_generatePosition:function(K){var E,C,G,L,D=this.options,J=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!B.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,I=/(html|body)/i.test(J[0].tagName),H=K.pageX,F=K.pageY;
return this.originalPosition&&(this.containment&&(this.relative_container?(C=this.relative_container.offset(),E=[this.containment[0]+C.left,this.containment[1]+C.top,this.containment[2]+C.left,this.containment[3]+C.top]):E=this.containment,K.pageX-this.offset.click.left<E[0]&&(H=E[0]+this.offset.click.left),K.pageY-this.offset.click.top<E[1]&&(F=E[1]+this.offset.click.top),K.pageX-this.offset.click.left>E[2]&&(H=E[2]+this.offset.click.left),K.pageY-this.offset.click.top>E[3]&&(F=E[3]+this.offset.click.top)),D.grid&&(G=D.grid[1]?this.originalPageY+Math.round((F-this.originalPageY)/D.grid[1])*D.grid[1]:this.originalPageY,F=E?G-this.offset.click.top>=E[1]||G-this.offset.click.top>E[3]?G:G-this.offset.click.top>=E[1]?G-D.grid[1]:G+D.grid[1]:G,L=D.grid[0]?this.originalPageX+Math.round((H-this.originalPageX)/D.grid[0])*D.grid[0]:this.originalPageX,H=E?L-this.offset.click.left>=E[0]||L-this.offset.click.left>E[2]?L:L-this.offset.click.left>=E[0]?L-D.grid[0]:L+D.grid[0]:L)),{top:F-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():I?0:J.scrollTop()),left:H-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():I?0:J.scrollLeft())};
},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1;
},_trigger:function(C,E,D){return D=D||this._uiHash(),B.ui.plugin.call(this,C,[E,D]),C==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),B.Widget.prototype._trigger.call(this,C,E,D);
},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};
}}),B.ui.plugin.add("draggable","connectToSortable",{start:function(D,G){var F=B(this).data("ui-draggable"),C=F.options,E=B.extend({},G,{item:F.element});
F.sortables=[],B(C.connectToSortable).each(function(){var H=B.data(this,"ui-sortable");
H&&!H.options.disabled&&(F.sortables.push({instance:H,shouldRevert:H.options.revert}),H.refreshPositions(),H._trigger("activate",D,E));
});
},stop:function(D,F){var E=B(this).data("ui-draggable"),C=B.extend({},F,{item:E.element});
B.each(E.sortables,function(){this.instance.isOver?(this.instance.isOver=0,E.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(D),this.instance.options.helper=this.instance.options._helper,E.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",D,C));
});
},drag:function(D,F){var E=B(this).data("ui-draggable"),C=this;
B.each(E.sortables,function(){var G=!1,H=this;
this.instance.positionAbs=E.positionAbs,this.instance.helperProportions=E.helperProportions,this.instance.offset.click=E.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(G=!0,B.each(E.sortables,function(){return this.instance.positionAbs=E.positionAbs,this.instance.helperProportions=E.helperProportions,this.instance.offset.click=E.offset.click,this!==H&&this.instance._intersectsWith(this.instance.containerCache)&&B.ui.contains(H.instance.element[0],this.instance.element[0])&&(G=!1),G;
})),G?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=B(C).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return F.helper[0];
},D.target=this.instance.currentItem[0],this.instance._mouseCapture(D,!0),this.instance._mouseStart(D,!0,!0),this.instance.offset.click.top=E.offset.click.top,this.instance.offset.click.left=E.offset.click.left,this.instance.offset.parent.left-=E.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=E.offset.parent.top-this.instance.offset.parent.top,E._trigger("toSortable",D),E.dropped=this.instance.element,E.currentItem=E.element,this.instance.fromOutside=E),this.instance.currentItem&&this.instance._mouseDrag(D)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",D,this.instance._uiHash(this.instance)),this.instance._mouseStop(D,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),E._trigger("fromSortable",D),E.dropped=!1);
});
}}),B.ui.plugin.add("draggable","cursor",{start:function(){var C=B("body"),D=B(this).data("ui-draggable").options;
C.css("cursor")&&(D._cursor=C.css("cursor")),C.css("cursor",D.cursor);
},stop:function(){var C=B(this).data("ui-draggable").options;
C._cursor&&B("body").css("cursor",C._cursor);
}}),B.ui.plugin.add("draggable","opacity",{start:function(D,F){var E=B(F.helper),C=B(this).data("ui-draggable").options;
E.css("opacity")&&(C._opacity=E.css("opacity")),E.css("opacity",C.opacity);
},stop:function(C,E){var D=B(this).data("ui-draggable").options;
D._opacity&&B(E.helper).css("opacity",D._opacity);
}}),B.ui.plugin.add("draggable","scroll",{start:function(){var C=B(this).data("ui-draggable");
C.scrollParent[0]!==document&&C.scrollParent[0].tagName!=="HTML"&&(C.overflowOffset=C.scrollParent.offset());
},drag:function(D){var F=B(this).data("ui-draggable"),E=F.options,C=!1;
if(F.scrollParent[0]!==document&&F.scrollParent[0].tagName!=="HTML"){if(!E.axis||E.axis!=="x"){F.overflowOffset.top+F.scrollParent[0].offsetHeight-D.pageY<E.scrollSensitivity?F.scrollParent[0].scrollTop=C=F.scrollParent[0].scrollTop+E.scrollSpeed:D.pageY-F.overflowOffset.top<E.scrollSensitivity&&(F.scrollParent[0].scrollTop=C=F.scrollParent[0].scrollTop-E.scrollSpeed);
}if(!E.axis||E.axis!=="y"){F.overflowOffset.left+F.scrollParent[0].offsetWidth-D.pageX<E.scrollSensitivity?F.scrollParent[0].scrollLeft=C=F.scrollParent[0].scrollLeft+E.scrollSpeed:D.pageX-F.overflowOffset.left<E.scrollSensitivity&&(F.scrollParent[0].scrollLeft=C=F.scrollParent[0].scrollLeft-E.scrollSpeed);
}}else{if(!E.axis||E.axis!=="x"){D.pageY-B(document).scrollTop()<E.scrollSensitivity?C=B(document).scrollTop(B(document).scrollTop()-E.scrollSpeed):B(window).height()-(D.pageY-B(document).scrollTop())<E.scrollSensitivity&&(C=B(document).scrollTop(B(document).scrollTop()+E.scrollSpeed));
}if(!E.axis||E.axis!=="y"){D.pageX-B(document).scrollLeft()<E.scrollSensitivity?C=B(document).scrollLeft(B(document).scrollLeft()-E.scrollSpeed):B(window).width()-(D.pageX-B(document).scrollLeft())<E.scrollSensitivity&&(C=B(document).scrollLeft(B(document).scrollLeft()+E.scrollSpeed));
}}C!==!1&&B.ui.ddmanager&&!E.dropBehaviour&&B.ui.ddmanager.prepareOffsets(F,D);
}}),B.ui.plugin.add("draggable","snap",{start:function(){var C=B(this).data("ui-draggable"),D=C.options;
C.snapElements=[],B(D.snap.constructor!==String?D.snap.items||":data(ui-draggable)":D.snap).each(function(){var F=B(this),E=F.offset();
this!==C.element[0]&&C.snapElements.push({item:this,width:F.outerWidth(),height:F.outerHeight(),top:E.top,left:E.left});
});
},drag:function(F,K){var H,N,G,J,E,U,Q,M,S,O,I=B(this).data("ui-draggable"),R=I.options,D=R.snapTolerance,L=K.offset.left,P=L+I.helperProportions.width,C=K.offset.top,T=C+I.helperProportions.height;
for(S=I.snapElements.length-1;
S>=0;
S--){E=I.snapElements[S].left,U=E+I.snapElements[S].width,Q=I.snapElements[S].top,M=Q+I.snapElements[S].height;
if(!(E-D<L&&L<U+D&&Q-D<C&&C<M+D||E-D<L&&L<U+D&&Q-D<T&&T<M+D||E-D<P&&P<U+D&&Q-D<C&&C<M+D||E-D<P&&P<U+D&&Q-D<T&&T<M+D)){I.snapElements[S].snapping&&I.options.snap.release&&I.options.snap.release.call(I.element,F,B.extend(I._uiHash(),{snapItem:I.snapElements[S].item})),I.snapElements[S].snapping=!1;
continue;
}R.snapMode!=="inner"&&(H=Math.abs(Q-T)<=D,N=Math.abs(M-C)<=D,G=Math.abs(E-P)<=D,J=Math.abs(U-L)<=D,H&&(K.position.top=I._convertPositionTo("relative",{top:Q-I.helperProportions.height,left:0}).top-I.margins.top),N&&(K.position.top=I._convertPositionTo("relative",{top:M,left:0}).top-I.margins.top),G&&(K.position.left=I._convertPositionTo("relative",{top:0,left:E-I.helperProportions.width}).left-I.margins.left),J&&(K.position.left=I._convertPositionTo("relative",{top:0,left:U}).left-I.margins.left)),O=H||N||G||J,R.snapMode!=="outer"&&(H=Math.abs(Q-C)<=D,N=Math.abs(M-T)<=D,G=Math.abs(E-L)<=D,J=Math.abs(U-P)<=D,H&&(K.position.top=I._convertPositionTo("relative",{top:Q,left:0}).top-I.margins.top),N&&(K.position.top=I._convertPositionTo("relative",{top:M-I.helperProportions.height,left:0}).top-I.margins.top),G&&(K.position.left=I._convertPositionTo("relative",{top:0,left:E}).left-I.margins.left),J&&(K.position.left=I._convertPositionTo("relative",{top:0,left:U-I.helperProportions.width}).left-I.margins.left)),!I.snapElements[S].snapping&&(H||N||G||J||O)&&I.options.snap.snap&&I.options.snap.snap.call(I.element,F,B.extend(I._uiHash(),{snapItem:I.snapElements[S].item})),I.snapElements[S].snapping=H||N||G||J||O;
}}}),B.ui.plugin.add("draggable","stack",{start:function(){var C,E=B(this).data("ui-draggable").options,D=B.makeArray(B(E.stack)).sort(function(F,G){return(parseInt(B(F).css("zIndex"),10)||0)-(parseInt(B(G).css("zIndex"),10)||0);
});
if(!D.length){return ;
}C=parseInt(D[0].style.zIndex,10)||0,B(D).each(function(F){this.style.zIndex=C+F;
}),this[0].style.zIndex=C+D.length;
}}),B.ui.plugin.add("draggable","zIndex",{start:function(D,F){var E=B(F.helper),C=B(this).data("ui-draggable").options;
E.css("zIndex")&&(C._zIndex=E.css("zIndex")),E.css("zIndex",C.zIndex);
},stop:function(C,E){var D=B(this).data("ui-draggable").options;
D._zIndex&&B(E.helper).css("zIndex",D._zIndex);
}});
})(jQuery);
(function(B,A){function C(E,D,F){return E>D&&E<D+F;
}B.widget("ui.droppable",{version:"1.10.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var D=this.options,E=D.accept;
this.isover=!1,this.isout=!0,this.accept=B.isFunction(E)?E:function(F){return F.is(E);
},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},B.ui.ddmanager.droppables[D.scope]=B.ui.ddmanager.droppables[D.scope]||[],B.ui.ddmanager.droppables[D.scope].push(this),D.addClasses&&this.element.addClass("ui-droppable");
},_destroy:function(){var D=0,E=B.ui.ddmanager.droppables[this.options.scope];
for(;
D<E.length;
D++){E[D]===this&&E.splice(D,1);
}this.element.removeClass("ui-droppable ui-droppable-disabled");
},_setOption:function(D,E){D==="accept"&&(this.accept=B.isFunction(E)?E:function(F){return F.is(E);
}),B.Widget.prototype._setOption.apply(this,arguments);
},_activate:function(D){var E=B.ui.ddmanager.current;
this.options.activeClass&&this.element.addClass(this.options.activeClass),E&&this._trigger("activate",D,this.ui(E));
},_deactivate:function(D){var E=B.ui.ddmanager.current;
this.options.activeClass&&this.element.removeClass(this.options.activeClass),E&&this._trigger("deactivate",D,this.ui(E));
},_over:function(D){var E=B.ui.ddmanager.current;
if(!E||(E.currentItem||E.element)[0]===this.element[0]){return ;
}this.accept.call(this.element[0],E.currentItem||E.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",D,this.ui(E)));
},_out:function(D){var E=B.ui.ddmanager.current;
if(!E||(E.currentItem||E.element)[0]===this.element[0]){return ;
}this.accept.call(this.element[0],E.currentItem||E.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",D,this.ui(E)));
},_drop:function(E,G){var F=G||B.ui.ddmanager.current,D=!1;
return !F||(F.currentItem||F.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var H=B.data(this,"ui-droppable");
if(H.options.greedy&&!H.options.disabled&&H.options.scope===F.options.scope&&H.accept.call(H.element[0],F.currentItem||F.element)&&B.ui.intersect(F,B.extend(H,{offset:H.element.offset()}),H.options.tolerance)){return D=!0,!1;
}}),D?!1:this.accept.call(this.element[0],F.currentItem||F.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",E,this.ui(F)),this.element):!1);
},ui:function(D){return{draggable:D.currentItem||D.element,helper:D.helper,position:D.position,offset:D.positionAbs};
}}),B.ui.intersect=function(K,O,D){if(!O.offset){return !1;
}var H,P,F=(K.positionAbs||K.position.absolute).left,N=F+K.helperProportions.width,M=(K.positionAbs||K.position.absolute).top,J=M+K.helperProportions.height,G=O.offset.left,L=G+O.proportions.width,I=O.offset.top,E=I+O.proportions.height;
switch(D){case"fit":return G<=F&&N<=L&&I<=M&&J<=E;
case"intersect":return G<F+K.helperProportions.width/2&&N-K.helperProportions.width/2<L&&I<M+K.helperProportions.height/2&&J-K.helperProportions.height/2<E;
case"pointer":return H=(K.positionAbs||K.position.absolute).left+(K.clickOffset||K.offset.click).left,P=(K.positionAbs||K.position.absolute).top+(K.clickOffset||K.offset.click).top,C(P,I,O.proportions.height)&&C(H,G,O.proportions.width);
case"touch":return(M>=I&&M<=E||J>=I&&J<=E||M<I&&J>E)&&(F>=G&&F<=L||N>=G&&N<=L||F<G&&N>L);
default:return !1;
}},B.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(F,J){var H,E,G=B.ui.ddmanager.droppables[F.options.scope]||[],I=J?J.type:null,D=(F.currentItem||F.element).find(":data(ui-droppable)").addBack();
B:for(H=0;
H<G.length;
H++){if(G[H].options.disabled||F&&!G[H].accept.call(G[H].element[0],F.currentItem||F.element)){continue;
}for(E=0;
E<D.length;
E++){if(D[E]===G[H].element[0]){G[H].proportions.height=0;
continue B;
}}G[H].visible=G[H].element.css("display")!=="none";
if(!G[H].visible){continue;
}I==="mousedown"&&G[H]._activate.call(G[H],J),G[H].offset=G[H].element.offset(),G[H].proportions={width:G[H].element[0].offsetWidth,height:G[H].element[0].offsetHeight};
}},drop:function(D,F){var E=!1;
return B.each(B.ui.ddmanager.droppables[D.options.scope]||[],function(){if(!this.options){return ;
}!this.options.disabled&&this.visible&&B.ui.intersect(D,this,this.options.tolerance)&&(E=this._drop.call(this,F)||E),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],D.currentItem||D.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,F));
}),E;
},dragStart:function(D,E){D.element.parentsUntil("body").bind("scroll.droppable",function(){D.options.refreshPositions||B.ui.ddmanager.prepareOffsets(D,E);
});
},drag:function(D,E){D.options.refreshPositions&&B.ui.ddmanager.prepareOffsets(D,E),B.each(B.ui.ddmanager.droppables[D.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return ;
}var I,G,H,J=B.ui.intersect(D,this,this.options.tolerance),F=!J&&this.isover?"isout":J&&!this.isover?"isover":null;
if(!F){return ;
}this.options.greedy&&(G=this.options.scope,H=this.element.parents(":data(ui-droppable)").filter(function(){return B.data(this,"ui-droppable").options.scope===G;
}),H.length&&(I=B.data(H[0],"ui-droppable"),I.greedyChild=F==="isover")),I&&F==="isover"&&(I.isover=!1,I.isout=!0,I._out.call(I,E)),this[F]=!0,this[F==="isout"?"isover":"isout"]=!1,this[F==="isover"?"_over":"_out"].call(this,E),I&&F==="isout"&&(I.isout=!1,I.isover=!0,I._over.call(I,E));
});
},dragStop:function(D,E){D.element.parentsUntil("body").unbind("scroll.droppable"),D.options.refreshPositions||B.ui.ddmanager.prepareOffsets(D,E);
}};
})(jQuery);
(function(C,A){function D(E){return parseInt(E,10)||0;
}function B(E){return !isNaN(parseInt(E,10));
}C.widget("ui.resizable",C.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var G,K,I,F,H,J=this,E=this.options;
this.element.addClass("ui-resizable"),C.extend(this,{_aspectRatio:!!E.aspectRatio,aspectRatio:E.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:E.helper||E.ghost||E.animate?E.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(C("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=E.handles||(C(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");
if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),G=this.handles.split(","),this.handles={};
for(K=0;
K<G.length;
K++){I=C.trim(G[K]),H="ui-resizable-"+I,F=C("<div class='ui-resizable-handle "+H+"'></div>"),F.css({zIndex:E.zIndex}),"se"===I&&F.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[I]=".ui-resizable-"+I,this.element.append(F);
}}this._renderAxis=function(M){var P,O,L,N;
M=M||this.element;
for(P in this.handles){this.handles[P].constructor===String&&(this.handles[P]=C(this.handles[P],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(O=C(this.handles[P],this.element),N=/sw|ne|nw|se|n|s/.test(P)?O.outerHeight():O.outerWidth(),L=["padding",/ne|nw|n/.test(P)?"Top":/se|sw|s/.test(P)?"Bottom":/^e$/.test(P)?"Right":"Left"].join(""),M.css(L,N),this._proportionallyResize());
if(!C(this.handles[P]).length){continue;
}}},this._renderAxis(this.element),this._handles=C(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){J.resizing||(this.className&&(F=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),J.axis=F&&F[1]?F[1]:"se");
}),E.autoHide&&(this._handles.hide(),C(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(E.disabled){return ;
}C(this).removeClass("ui-resizable-autohide"),J._handles.show();
}).mouseleave(function(){if(E.disabled){return ;
}J.resizing||(C(this).addClass("ui-resizable-autohide"),J._handles.hide());
})),this._mouseInit();
},_destroy:function(){this._mouseDestroy();
var E,F=function(G){C(G).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
};
return this.elementIsWrapper&&(F(this.element),E=this.element,this.originalElement.css({position:E.css("position"),width:E.outerWidth(),height:E.outerHeight(),top:E.css("top"),left:E.css("left")}).insertAfter(E),E.remove()),this.originalElement.css("resize",this.originalResizeStyle),F(this.originalElement),this;
},_mouseCapture:function(F){var H,G,E=!1;
for(H in this.handles){G=C(this.handles[H])[0];
if(G===F.target||C.contains(G,F.target)){E=!0;
}}return !this.options.disabled&&E;
},_mouseStart:function(H){var J,G,I,K=this.options,F=this.element.position(),E=this.element;
return this.resizing=!0,/absolute/.test(E.css("position"))?E.css({position:"absolute",top:E.css("top"),left:E.css("left")}):E.is(".ui-draggable")&&E.css({position:"absolute",top:F.top,left:F.left}),this._renderProxy(),J=D(this.helper.css("left")),G=D(this.helper.css("top")),K.containment&&(J+=C(K.containment).scrollLeft()||0,G+=C(K.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:J,top:G},this.size=this._helper?{width:E.outerWidth(),height:E.outerHeight()}:{width:E.width(),height:E.height()},this.originalSize=this._helper?{width:E.outerWidth(),height:E.outerHeight()}:{width:E.width(),height:E.height()},this.originalPosition={left:J,top:G},this.sizeDiff={width:E.outerWidth()-E.width(),height:E.outerHeight()-E.height()},this.originalMousePosition={left:H.pageX,top:H.pageY},this.aspectRatio=typeof K.aspectRatio=="number"?K.aspectRatio:this.originalSize.width/this.originalSize.height||1,I=C(".ui-resizable-"+this.axis).css("cursor"),C("body").css("cursor",I==="auto"?this.axis+"-resize":I),E.addClass("ui-resizable-resizing"),this._propagate("start",H),!0;
},_mouseDrag:function(P){var H,E=this.helper,J={},Q=this.originalMousePosition,G=this.axis,O=this.position.top,N=this.position.left,L=this.size.width,I=this.size.height,M=P.pageX-Q.left||0,K=P.pageY-Q.top||0,F=this._change[G];
if(!F){return !1;
}H=F.apply(this,[P,M,K]),this._updateVirtualBoundaries(P.shiftKey);
if(this._aspectRatio||P.shiftKey){H=this._updateRatio(H,P);
}return H=this._respectSize(H,P),this._updateCache(H),this._propagate("resize",P),this.position.top!==O&&(J.top=this.position.top+"px"),this.position.left!==N&&(J.left=this.position.left+"px"),this.size.width!==L&&(J.width=this.size.width+"px"),this.size.height!==I&&(J.height=this.size.height+"px"),E.css(J),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),C.isEmptyObject(J)||this._trigger("resize",P,this.ui()),!1;
},_mouseStop:function(M){this.resizing=!1;
var G,E,I,N,F,L,K,J=this.options,H=this;
return this._helper&&(G=this._proportionallyResizeElements,E=G.length&&/textarea/i.test(G[0].nodeName),I=E&&C.ui.hasScroll(G[0],"left")?0:H.sizeDiff.height,N=E?0:H.sizeDiff.width,F={width:H.helper.width()-N,height:H.helper.height()-I},L=parseInt(H.element.css("left"),10)+(H.position.left-H.originalPosition.left)||null,K=parseInt(H.element.css("top"),10)+(H.position.top-H.originalPosition.top)||null,J.animate||this.element.css(C.extend(F,{top:K,left:L})),H.helper.height(H.size.height),H.helper.width(H.size.width),this._helper&&!J.animate&&this._proportionallyResize()),C("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",M),this._helper&&this.helper.remove(),!1;
},_updateVirtualBoundaries:function(I){var G,K,F,H,J,E=this.options;
J={minWidth:B(E.minWidth)?E.minWidth:0,maxWidth:B(E.maxWidth)?E.maxWidth:Infinity,minHeight:B(E.minHeight)?E.minHeight:0,maxHeight:B(E.maxHeight)?E.maxHeight:Infinity};
if(this._aspectRatio||I){G=J.minHeight*this.aspectRatio,F=J.minWidth/this.aspectRatio,K=J.maxHeight*this.aspectRatio,H=J.maxWidth/this.aspectRatio,G>J.minWidth&&(J.minWidth=G),F>J.minHeight&&(J.minHeight=F),K<J.maxWidth&&(J.maxWidth=K),H<J.maxHeight&&(J.maxHeight=H);
}this._vBoundaries=J;
},_updateCache:function(E){this.offset=this.helper.offset(),B(E.left)&&(this.position.left=E.left),B(E.top)&&(this.position.top=E.top),B(E.height)&&(this.size.height=E.height),B(E.width)&&(this.size.width=E.width);
},_updateRatio:function(G){var F=this.position,H=this.size,E=this.axis;
return B(G.height)?G.width=G.height*this.aspectRatio:B(G.width)&&(G.height=G.width/this.aspectRatio),E==="sw"&&(G.left=F.left+(H.width-G.width),G.top=null),E==="nw"&&(G.top=F.top+(H.height-G.height),G.left=F.left+(H.width-G.width)),G;
},_respectSize:function(J){var N=this._vBoundaries,F=this.axis,H=B(J.width)&&N.maxWidth&&N.maxWidth<J.width,O=B(J.height)&&N.maxHeight&&N.maxHeight<J.height,E=B(J.width)&&N.minWidth&&N.minWidth>J.width,M=B(J.height)&&N.minHeight&&N.minHeight>J.height,L=this.originalPosition.left+this.originalSize.width,I=this.position.top+this.size.height,G=/sw|nw|w/.test(F),K=/nw|ne|n/.test(F);
return E&&(J.width=N.minWidth),M&&(J.height=N.minHeight),H&&(J.width=N.maxWidth),O&&(J.height=N.maxHeight),E&&G&&(J.left=L-N.minWidth),H&&G&&(J.left=L-N.maxWidth),M&&K&&(J.top=I-N.minHeight),O&&K&&(J.top=I-N.maxHeight),!J.width&&!J.height&&!J.left&&J.top?J.top=null:!J.width&&!J.height&&!J.top&&J.left&&(J.left=null),J;
},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return ;
}var I,F,J,H,E,G=this.helper||this.element;
for(I=0;
I<this._proportionallyResizeElements.length;
I++){E=this._proportionallyResizeElements[I];
if(!this.borderDif){this.borderDif=[],J=[E.css("borderTopWidth"),E.css("borderRightWidth"),E.css("borderBottomWidth"),E.css("borderLeftWidth")],H=[E.css("paddingTop"),E.css("paddingRight"),E.css("paddingBottom"),E.css("paddingLeft")];
for(F=0;
F<J.length;
F++){this.borderDif[F]=(parseInt(J[F],10)||0)+(parseInt(H[F],10)||0);
}}E.css({height:G.height()-this.borderDif[0]-this.borderDif[2]||0,width:G.width()-this.borderDif[1]-this.borderDif[3]||0});
}},_renderProxy:function(){var E=this.element,F=this.options;
this.elementOffset=E.offset(),this._helper?(this.helper=this.helper||C("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++F.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element;
},_change:{e:function(F,E){return{width:this.originalSize.width+E};
},w:function(G,E){var H=this.originalSize,F=this.originalPosition;
return{left:F.left+E,width:H.width-E};
},n:function(H,F,I){var G=this.originalSize,E=this.originalPosition;
return{top:E.top+I,height:G.height-I};
},s:function(F,E,G){return{height:this.originalSize.height+G};
},se:function(E,G,F){return C.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[E,G,F]));
},sw:function(E,G,F){return C.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[E,G,F]));
},ne:function(E,G,F){return C.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[E,G,F]));
},nw:function(E,G,F){return C.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[E,G,F]));
}},_propagate:function(E,F){C.ui.plugin.call(this,E,[F,this.ui()]),E!=="resize"&&this._trigger(E,F,this.ui());
},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};
}}),C.ui.plugin.add("resizable","animate",{stop:function(M){var G=C(this).data("ui-resizable"),E=G.options,I=G._proportionallyResizeElements,N=I.length&&/textarea/i.test(I[0].nodeName),F=N&&C.ui.hasScroll(I[0],"left")?0:G.sizeDiff.height,L=N?0:G.sizeDiff.width,K={width:G.size.width-L,height:G.size.height-F},J=parseInt(G.element.css("left"),10)+(G.position.left-G.originalPosition.left)||null,H=parseInt(G.element.css("top"),10)+(G.position.top-G.originalPosition.top)||null;
G.element.animate(C.extend(K,H&&J?{top:H,left:J}:{}),{duration:E.animateDuration,easing:E.animateEasing,step:function(){var O={width:parseInt(G.element.css("width"),10),height:parseInt(G.element.css("height"),10),top:parseInt(G.element.css("top"),10),left:parseInt(G.element.css("left"),10)};
I&&I.length&&C(I[0]).css({width:O.width,height:O.height}),G._updateCache(O),G._propagate("resize",M);
}});
}}),C.ui.plugin.add("resizable","containment",{start:function(){var O,E,I,P,G,N,M,K=C(this).data("ui-resizable"),H=K.options,L=K.element,J=H.containment,F=J instanceof C?J.get(0):/parent/.test(J)?L.parent().get(0):J;
if(!F){return ;
}K.containerElement=C(F),/document/.test(J)||J===document?(K.containerOffset={left:0,top:0},K.containerPosition={left:0,top:0},K.parentData={element:C(document),left:0,top:0,width:C(document).width(),height:C(document).height()||document.body.parentNode.scrollHeight}):(O=C(F),E=[],C(["Top","Right","Left","Bottom"]).each(function(R,Q){E[R]=D(O.css("padding"+Q));
}),K.containerOffset=O.offset(),K.containerPosition=O.position(),K.containerSize={height:O.innerHeight()-E[3],width:O.innerWidth()-E[1]},I=K.containerOffset,P=K.containerSize.height,G=K.containerSize.width,N=C.ui.hasScroll(F,"left")?F.scrollWidth:G,M=C.ui.hasScroll(F)?F.scrollHeight:P,K.parentData={element:F,left:I.left,top:I.top,width:N,height:M});
},resize:function(O){var G,E,I,P,F=C(this).data("ui-resizable"),N=F.options,M=F.containerOffset,K=F.position,H=F._aspectRatio||O.shiftKey,L={top:0,left:0},J=F.containerElement;
J[0]!==document&&/static/.test(J.css("position"))&&(L=M),K.left<(F._helper?M.left:0)&&(F.size.width=F.size.width+(F._helper?F.position.left-M.left:F.position.left-L.left),H&&(F.size.height=F.size.width/F.aspectRatio),F.position.left=N.helper?M.left:0),K.top<(F._helper?M.top:0)&&(F.size.height=F.size.height+(F._helper?F.position.top-M.top:F.position.top),H&&(F.size.width=F.size.height*F.aspectRatio),F.position.top=F._helper?M.top:0),F.offset.left=F.parentData.left+F.position.left,F.offset.top=F.parentData.top+F.position.top,G=Math.abs((F._helper?F.offset.left-L.left:F.offset.left-L.left)+F.sizeDiff.width),E=Math.abs((F._helper?F.offset.top-L.top:F.offset.top-M.top)+F.sizeDiff.height),I=F.containerElement.get(0)===F.element.parent().get(0),P=/relative|absolute/.test(F.containerElement.css("position")),I&&P&&(G-=F.parentData.left),G+F.size.width>=F.parentData.width&&(F.size.width=F.parentData.width-G,H&&(F.size.height=F.size.width/F.aspectRatio)),E+F.size.height>=F.parentData.height&&(F.size.height=F.parentData.height-E,H&&(F.size.width=F.size.height*F.aspectRatio));
},stop:function(){var L=C(this).data("ui-resizable"),G=L.options,E=L.containerOffset,H=L.containerPosition,M=L.containerElement,F=C(L.helper),K=F.offset(),J=F.outerWidth()-L.sizeDiff.width,I=F.outerHeight()-L.sizeDiff.height;
L._helper&&!G.animate&&/relative/.test(M.css("position"))&&C(this).css({left:K.left-H.left-E.left,width:J,height:I}),L._helper&&!G.animate&&/static/.test(M.css("position"))&&C(this).css({left:K.left-H.left-E.left,width:J,height:I});
}}),C.ui.plugin.add("resizable","alsoResize",{start:function(){var E=C(this).data("ui-resizable"),G=E.options,F=function(H){C(H).each(function(){var I=C(this);
I.data("ui-resizable-alsoresize",{width:parseInt(I.width(),10),height:parseInt(I.height(),10),left:parseInt(I.css("left"),10),top:parseInt(I.css("top"),10)});
});
};
typeof G.alsoResize=="object"&&!G.alsoResize.parentNode?G.alsoResize.length?(G.alsoResize=G.alsoResize[0],F(G.alsoResize)):C.each(G.alsoResize,function(H){F(H);
}):F(G.alsoResize);
},resize:function(H,L){var J=C(this).data("ui-resizable"),G=J.options,I=J.originalSize,K=J.originalPosition,F={height:J.size.height-I.height||0,width:J.size.width-I.width||0,top:J.position.top-K.top||0,left:J.position.left-K.left||0},E=function(M,N){C(M).each(function(){var P=C(this),O=C(this).data("ui-resizable-alsoresize"),Q={},R=N&&N.length?N:P.parents(L.originalElement[0]).length?["width","height"]:["width","height","top","left"];
C.each(R,function(T,S){var U=(O[S]||0)+(F[S]||0);
U&&U>=0&&(Q[S]=U||null);
}),P.css(Q);
});
};
typeof G.alsoResize=="object"&&!G.alsoResize.nodeType?C.each(G.alsoResize,function(N,M){E(N,M);
}):E(G.alsoResize);
},stop:function(){C(this).removeData("resizable-alsoresize");
}}),C.ui.plugin.add("resizable","ghost",{start:function(){var E=C(this).data("ui-resizable"),G=E.options,F=E.size;
E.ghost=E.originalElement.clone(),E.ghost.css({opacity:0.25,display:"block",position:"relative",height:F.height,width:F.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof G.ghost=="string"?G.ghost:""),E.ghost.appendTo(E.helper);
},resize:function(){var E=C(this).data("ui-resizable");
E.ghost&&E.ghost.css({position:"relative",height:E.size.height,width:E.size.width});
},stop:function(){var E=C(this).data("ui-resizable");
E.ghost&&E.helper&&E.helper.get(0).removeChild(E.ghost.get(0));
}}),C.ui.plugin.add("resizable","grid",{resize:function(){var T=C(this).data("ui-resizable"),H=T.options,E=T.size,K=T.originalSize,U=T.originalPosition,G=T.axis,S=typeof H.grid=="number"?[H.grid,H.grid]:H.grid,Q=S[0]||1,N=S[1]||1,J=Math.round((E.width-K.width)/Q)*Q,P=Math.round((E.height-K.height)/N)*N,L=K.width+J,F=K.height+P,O=H.maxWidth&&H.maxWidth<L,R=H.maxHeight&&H.maxHeight<F,I=H.minWidth&&H.minWidth>L,M=H.minHeight&&H.minHeight>F;
H.grid=S,I&&(L+=Q),M&&(F+=N),O&&(L-=Q),R&&(F-=N),/^(se|s|e)$/.test(G)?(T.size.width=L,T.size.height=F):/^(ne)$/.test(G)?(T.size.width=L,T.size.height=F,T.position.top=U.top-P):/^(sw)$/.test(G)?(T.size.width=L,T.size.height=F,T.position.left=U.left-J):(T.size.width=L,T.size.height=F,T.position.top=U.top-P,T.position.left=U.left-J);
}});
})(jQuery);
(function(B,A){B.widget("ui.selectable",B.ui.mouse,{version:"1.10.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var C,D=this;
this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){C=B(D.options.filter,D.element[0]),C.addClass("ui-selectee"),C.each(function(){var E=B(this),F=E.offset();
B.data(this,"selectable-item",{element:this,$element:E,left:F.left,top:F.top,right:F.left+E.outerWidth(),bottom:F.top+E.outerHeight(),startselected:!1,selected:E.hasClass("ui-selected"),selecting:E.hasClass("ui-selecting"),unselecting:E.hasClass("ui-unselecting")});
});
},this.refresh(),this.selectees=C.addClass("ui-selectee"),this._mouseInit(),this.helper=B("<div class='ui-selectable-helper'></div>");
},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy();
},_mouseStart:function(C){var E=this,D=this.options;
this.opos=[C.pageX,C.pageY];
if(this.options.disabled){return ;
}this.selectees=B(D.filter,this.element[0]),this._trigger("start",C),B(D.appendTo).append(this.helper),this.helper.css({left:C.pageX,top:C.pageY,width:0,height:0}),D.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var F=B.data(this,"selectable-item");
F.startselected=!0,!C.metaKey&&!C.ctrlKey&&(F.$element.removeClass("ui-selected"),F.selected=!1,F.$element.addClass("ui-unselecting"),F.unselecting=!0,E._trigger("unselecting",C,{unselecting:F.element}));
}),B(C.target).parents().addBack().each(function(){var G,F=B.data(this,"selectable-item");
if(F){return G=!C.metaKey&&!C.ctrlKey||!F.$element.hasClass("ui-selected"),F.$element.removeClass(G?"ui-unselecting":"ui-selected").addClass(G?"ui-selecting":"ui-unselecting"),F.unselecting=!G,F.selecting=G,F.selected=G,G?E._trigger("selecting",C,{selecting:F.element}):E._trigger("unselecting",C,{unselecting:F.element}),!1;
}});
},_mouseDrag:function(F){this.dragged=!0;
if(this.options.disabled){return ;
}var J,H=this,E=this.options,G=this.opos[0],I=this.opos[1],D=F.pageX,C=F.pageY;
return G>D&&(J=D,D=G,G=J),I>C&&(J=C,C=I,I=J),this.helper.css({left:G,top:I,width:D-G,height:C-I}),this.selectees.each(function(){var L=B.data(this,"selectable-item"),K=!1;
if(!L||L.element===H.element[0]){return ;
}E.tolerance==="touch"?K=!(L.left>D||L.right<G||L.top>C||L.bottom<I):E.tolerance==="fit"&&(K=L.left>G&&L.right<D&&L.top>I&&L.bottom<C),K?(L.selected&&(L.$element.removeClass("ui-selected"),L.selected=!1),L.unselecting&&(L.$element.removeClass("ui-unselecting"),L.unselecting=!1),L.selecting||(L.$element.addClass("ui-selecting"),L.selecting=!0,H._trigger("selecting",F,{selecting:L.element}))):(L.selecting&&((F.metaKey||F.ctrlKey)&&L.startselected?(L.$element.removeClass("ui-selecting"),L.selecting=!1,L.$element.addClass("ui-selected"),L.selected=!0):(L.$element.removeClass("ui-selecting"),L.selecting=!1,L.startselected&&(L.$element.addClass("ui-unselecting"),L.unselecting=!0),H._trigger("unselecting",F,{unselecting:L.element}))),L.selected&&!F.metaKey&&!F.ctrlKey&&!L.startselected&&(L.$element.removeClass("ui-selected"),L.selected=!1,L.$element.addClass("ui-unselecting"),L.unselecting=!0,H._trigger("unselecting",F,{unselecting:L.element})));
}),!1;
},_mouseStop:function(C){var D=this;
return this.dragged=!1,B(".ui-unselecting",this.element[0]).each(function(){var E=B.data(this,"selectable-item");
E.$element.removeClass("ui-unselecting"),E.unselecting=!1,E.startselected=!1,D._trigger("unselected",C,{unselected:E.element});
}),B(".ui-selecting",this.element[0]).each(function(){var E=B.data(this,"selectable-item");
E.$element.removeClass("ui-selecting").addClass("ui-selected"),E.selecting=!1,E.selected=!0,E.startselected=!0,D._trigger("selected",C,{selected:E.element});
}),this._trigger("stop",C),this.helper.remove(),!1;
}});
})(jQuery);
(function(B,A){function C(E,D,F){return E>D&&E<D+F;
}B.widget("ui.sortable",B.ui.mouse,{version:"1.10.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var D=this.options;
this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?D.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0;
},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();
for(var D=this.items.length-1;
D>=0;
D--){this.items[D].item.removeData(this.widgetName+"-item");
}return this;
},_setOption:function(D,E){D==="disabled"?(this.options[D]=E,this.widget().toggleClass("ui-sortable-disabled",!!E)):B.Widget.prototype._setOption.apply(this,arguments);
},_mouseCapture:function(E,H){var G=null,D=!1,F=this;
if(this.reverting){return !1;
}if(this.options.disabled||this.options.type==="static"){return !1;
}this._refreshItems(E),B(E.target).parents().each(function(){if(B.data(this,F.widgetName+"-item")===F){return G=B(this),!1;
}}),B.data(E.target,F.widgetName+"-item")===F&&(G=B(E.target));
if(!G){return !1;
}if(this.options.handle&&!H){B(this.options.handle,G).find("*").addBack().each(function(){this===E.target&&(D=!0);
});
if(!D){return !1;
}}return this.currentItem=G,this._removeCurrentsFromItems(),!0;
},_mouseStart:function(E,H,G){var D,F=this.options;
this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(E),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},B.extend(this.offset,{click:{left:E.pageX-this.offset.left,top:E.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(E),this.originalPageX=E.pageX,this.originalPageY=E.pageY,F.cursorAt&&this._adjustOffsetFromHelper(F.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),F.containment&&this._setContainment(),F.cursor&&(B("body").css("cursor")&&(this._storedCursor=B("body").css("cursor")),B("body").css("cursor",F.cursor)),F.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",F.opacity)),F.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",F.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",E,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();
if(!G){for(D=this.containers.length-1;
D>=0;
D--){this.containers[D]._trigger("activate",E,this._uiHash(this));
}}return B.ui.ddmanager&&(B.ui.ddmanager.current=this),B.ui.ddmanager&&!F.dropBehaviour&&B.ui.ddmanager.prepareOffsets(this,E),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(E),!0;
},_mouseDrag:function(F){var J,H,E,G,I=this.options,D=!1;
this.position=this._generatePosition(F),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-F.pageY<I.scrollSensitivity?this.scrollParent[0].scrollTop=D=this.scrollParent[0].scrollTop+I.scrollSpeed:F.pageY-this.overflowOffset.top<I.scrollSensitivity&&(this.scrollParent[0].scrollTop=D=this.scrollParent[0].scrollTop-I.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-F.pageX<I.scrollSensitivity?this.scrollParent[0].scrollLeft=D=this.scrollParent[0].scrollLeft+I.scrollSpeed:F.pageX-this.overflowOffset.left<I.scrollSensitivity&&(this.scrollParent[0].scrollLeft=D=this.scrollParent[0].scrollLeft-I.scrollSpeed)):(F.pageY-B(document).scrollTop()<I.scrollSensitivity?D=B(document).scrollTop(B(document).scrollTop()-I.scrollSpeed):B(window).height()-(F.pageY-B(document).scrollTop())<I.scrollSensitivity&&(D=B(document).scrollTop(B(document).scrollTop()+I.scrollSpeed)),F.pageX-B(document).scrollLeft()<I.scrollSensitivity?D=B(document).scrollLeft(B(document).scrollLeft()-I.scrollSpeed):B(window).width()-(F.pageX-B(document).scrollLeft())<I.scrollSensitivity&&(D=B(document).scrollLeft(B(document).scrollLeft()+I.scrollSpeed))),D!==!1&&B.ui.ddmanager&&!I.dropBehaviour&&B.ui.ddmanager.prepareOffsets(this,F)),this.positionAbs=this._convertPositionTo("absolute");
if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px";
}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px";
}for(J=this.items.length-1;
J>=0;
J--){H=this.items[J],E=H.item[0],G=this._intersectsWithPointer(H);
if(!G){continue;
}if(H.instance!==this.currentContainer){continue;
}if(E!==this.currentItem[0]&&this.placeholder[G===1?"next":"prev"]()[0]!==E&&!B.contains(this.placeholder[0],E)&&(this.options.type==="semi-dynamic"?!B.contains(this.element[0],E):!0)){this.direction=G===1?"down":"up";
if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(H)){break;
}this._rearrange(F,H),this._trigger("change",F,this._uiHash());
break;
}}return this._contactContainers(F),B.ui.ddmanager&&B.ui.ddmanager.drag(this,F),this._trigger("sort",F,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1;
},_mouseStop:function(E,G){if(!E){return ;
}B.ui.ddmanager&&!this.options.dropBehaviour&&B.ui.ddmanager.drop(this,E);
if(this.options.revert){var F=this,D=this.placeholder.offset();
this.reverting=!0,B(this.helper).animate({left:D.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:D.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){F._clear(E);
});
}else{this._clear(E,G);
}return !1;
},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();
for(var D=this.containers.length-1;
D>=0;
D--){this.containers[D]._trigger("deactivate",null,this._uiHash(this)),this.containers[D].containerCache.over&&(this.containers[D]._trigger("out",null,this._uiHash(this)),this.containers[D].containerCache.over=0);
}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),B.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?B(this.domPosition.prev).after(this.currentItem):B(this.domPosition.parent).prepend(this.currentItem)),this;
},serialize:function(D){var F=this._getItemsAsjQuery(D&&D.connected),E=[];
return D=D||{},B(F).each(function(){var G=(B(D.item||this).attr(D.attribute||"id")||"").match(D.expression||/(.+)[\-=_](.+)/);
G&&E.push((D.key||G[1]+"[]")+"="+(D.key&&D.expression?G[1]:G[2]));
}),!E.length&&D.key&&E.push(D.key+"="),E.join("&");
},toArray:function(D){var F=this._getItemsAsjQuery(D&&D.connected),E=[];
return D=D||{},F.each(function(){E.push(B(D.item||this).attr(D.attribute||"id")||"");
}),E;
},_intersectsWith:function(J){var N=this.positionAbs.left,F=N+this.helperProportions.width,D=this.positionAbs.top,H=D+this.helperProportions.height,O=J.left,E=O+J.width,M=J.top,L=M+J.height,I=this.offset.click.top,G=this.offset.click.left,K=D+I>M&&D+I<L&&N+G>O&&N+G<E;
return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>J[this.floating?"width":"height"]?K:O<N+this.helperProportions.width/2&&F-this.helperProportions.width/2<E&&M<D+this.helperProportions.height/2&&H-this.helperProportions.height/2<L;
},_intersectsWithPointer:function(H){var E=this.options.axis==="x"||C(this.positionAbs.top+this.offset.click.top,H.top,H.height),G=this.options.axis==="y"||C(this.positionAbs.left+this.offset.click.left,H.left,H.width),D=E&&G,F=this._getDragVerticalDirection(),I=this._getDragHorizontalDirection();
return D?this.floating?I&&I==="right"||F==="down"?2:1:F&&(F==="down"?2:1):!1;
},_intersectsWithSides:function(H){var E=C(this.positionAbs.top+this.offset.click.top,H.top+H.height/2,H.height),G=C(this.positionAbs.left+this.offset.click.left,H.left+H.width/2,H.width),D=this._getDragVerticalDirection(),F=this._getDragHorizontalDirection();
return this.floating&&F?F==="right"&&G||F==="left"&&!G:D&&(D==="down"&&E||D==="up"&&!E);
},_getDragVerticalDirection:function(){var D=this.positionAbs.top-this.lastPositionAbs.top;
return D!==0&&(D>0?"down":"up");
},_getDragHorizontalDirection:function(){var D=this.positionAbs.left-this.lastPositionAbs.left;
return D!==0&&(D>0?"right":"left");
},refresh:function(D){return this._refreshItems(D),this.refreshPositions(),this;
},_connectWith:function(){var D=this.options;
return D.connectWith.constructor===String?[D.connectWith]:D.connectWith;
},_getItemsAsjQuery:function(G){var K,I,F,H,J=[],E=[],D=this._connectWith();
if(D&&G){for(K=D.length-1;
K>=0;
K--){F=B(D[K]);
for(I=F.length-1;
I>=0;
I--){H=B.data(F[I],this.widgetFullName),H&&H!==this&&!H.options.disabled&&E.push([B.isFunction(H.options.items)?H.options.items.call(H.element):B(H.options.items,H.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),H]);
}}}E.push([B.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):B(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);
for(K=E.length-1;
K>=0;
K--){E[K][0].each(function(){J.push(this);
});
}return B(J);
},_removeCurrentsFromItems:function(){var D=this.currentItem.find(":data("+this.widgetName+"-item)");
this.items=B.grep(this.items,function(E){for(var F=0;
F<D.length;
F++){if(D[F]===E.item[0]){return !1;
}}return !0;
});
},_refreshItems:function(N){this.items=[],this.containers=[this];
var F,D,H,O,E,M,L,J,G=this.items,K=[[B.isFunction(this.options.items)?this.options.items.call(this.element[0],N,{item:this.currentItem}):B(this.options.items,this.element),this]],I=this._connectWith();
if(I&&this.ready){for(F=I.length-1;
F>=0;
F--){H=B(I[F]);
for(D=H.length-1;
D>=0;
D--){O=B.data(H[D],this.widgetFullName),O&&O!==this&&!O.options.disabled&&(K.push([B.isFunction(O.options.items)?O.options.items.call(O.element[0],N,{item:this.currentItem}):B(O.options.items,O.element),O]),this.containers.push(O));
}}}for(F=K.length-1;
F>=0;
F--){E=K[F][1],M=K[F][0];
for(D=0,J=M.length;
D<J;
D++){L=B(M[D]),L.data(this.widgetName+"-item",E),G.push({item:L,instance:E,width:0,height:0,left:0,top:0});
}}},refreshPositions:function(E){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());
var H,G,D,F;
for(H=this.items.length-1;
H>=0;
H--){G=this.items[H];
if(G.instance!==this.currentContainer&&this.currentContainer&&G.item[0]!==this.currentItem[0]){continue;
}D=this.options.toleranceElement?B(this.options.toleranceElement,G.item):G.item,E||(G.width=D.outerWidth(),G.height=D.outerHeight()),F=D.offset(),G.left=F.left,G.top=F.top;
}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);
}else{for(H=this.containers.length-1;
H>=0;
H--){F=this.containers[H].element.offset(),this.containers[H].containerCache.left=F.left,this.containers[H].containerCache.top=F.top,this.containers[H].containerCache.width=this.containers[H].element.outerWidth(),this.containers[H].containerCache.height=this.containers[H].element.outerHeight();
}}return this;
},_createPlaceholder:function(D){D=D||this;
var F,E=D.options;
if(!E.placeholder||E.placeholder.constructor===String){F=E.placeholder,E.placeholder={element:function(){var G=B(document.createElement(D.currentItem[0].nodeName)).addClass(F||D.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
return F||(G.style.visibility="hidden"),G;
},update:function(H,G){if(F&&!E.forcePlaceholderSize){return ;
}G.height()||G.height(D.currentItem.innerHeight()-parseInt(D.currentItem.css("paddingTop")||0,10)-parseInt(D.currentItem.css("paddingBottom")||0,10)),G.width()||G.width(D.currentItem.innerWidth()-parseInt(D.currentItem.css("paddingLeft")||0,10)-parseInt(D.currentItem.css("paddingRight")||0,10));
}};
}D.placeholder=B(E.placeholder.element.call(D.element,D.currentItem)),D.currentItem.after(D.placeholder),E.placeholder.update(D,D.placeholder);
},_contactContainers:function(N){var F,D,H,O,E,M,L,J,G,K=null,I=null;
for(F=this.containers.length-1;
F>=0;
F--){if(B.contains(this.currentItem[0],this.containers[F].element[0])){continue;
}if(this._intersectsWith(this.containers[F].containerCache)){if(K&&B.contains(this.containers[F].element[0],K.element[0])){continue;
}K=this.containers[F],I=F;
}else{this.containers[F].containerCache.over&&(this.containers[F]._trigger("out",N,this._uiHash(this)),this.containers[F].containerCache.over=0);
}}if(!K){return ;
}if(this.containers.length===1){this.containers[I]._trigger("over",N,this._uiHash(this)),this.containers[I].containerCache.over=1;
}else{H=10000,O=null,E=this.containers[I].floating?"left":"top",M=this.containers[I].floating?"width":"height",L=this.positionAbs[E]+this.offset.click[E];
for(D=this.items.length-1;
D>=0;
D--){if(!B.contains(this.containers[I].element[0],this.items[D].item[0])){continue;
}if(this.items[D].item[0]===this.currentItem[0]){continue;
}J=this.items[D].item.offset()[E],G=!1,Math.abs(J-L)>Math.abs(J+this.items[D][M]-L)&&(G=!0,J+=this.items[D][M]),Math.abs(J-L)<H&&(H=Math.abs(J-L),O=this.items[D],this.direction=G?"up":"down");
}if(!O&&!this.options.dropOnEmpty){return ;
}this.currentContainer=this.containers[I],O?this._rearrange(N,O,null,!0):this._rearrange(N,null,this.containers[I].element,!0),this._trigger("change",N,this._uiHash()),this.containers[I]._trigger("change",N,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[I]._trigger("over",N,this._uiHash(this)),this.containers[I].containerCache.over=1;
}},_createHelper:function(D){var F=this.options,E=B.isFunction(F.helper)?B(F.helper.apply(this.element[0],[D,this.currentItem])):F.helper==="clone"?this.currentItem.clone():this.currentItem;
return E.parents("body").length||B(F.appendTo!=="parent"?F.appendTo:this.currentItem[0].parentNode)[0].appendChild(E[0]),E[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!E[0].style.width||F.forceHelperSize)&&E.width(this.currentItem.width()),(!E[0].style.height||F.forceHelperSize)&&E.height(this.currentItem.height()),E;
},_adjustOffsetFromHelper:function(D){typeof D=="string"&&(D=D.split(" ")),B.isArray(D)&&(D={left:+D[0],top:+D[1]||0}),"left" in D&&(this.offset.click.left=D.left+this.margins.left),"right" in D&&(this.offset.click.left=this.helperProportions.width-D.right+this.margins.left),"top" in D&&(this.offset.click.top=D.top+this.margins.top),"bottom" in D&&(this.offset.click.top=this.helperProportions.height-D.bottom+this.margins.top);
},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();
var D=this.offsetParent.offset();
this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&B.contains(this.scrollParent[0],this.offsetParent[0])&&(D.left+=this.scrollParent.scrollLeft(),D.top+=this.scrollParent.scrollTop());
if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&B.ui.ie){D={top:0,left:0};
}return{top:D.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:D.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};
},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var D=this.currentItem.position();
return{top:D.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:D.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};
}return{top:0,left:0};
},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0};
},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};
},_setContainment:function(){var E,G,F,D=this.options;
D.containment==="parent"&&(D.containment=this.helper[0].parentNode);
if(D.containment==="document"||D.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,B(D.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(B(D.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];
}/^(document|window|parent)$/.test(D.containment)||(E=B(D.containment)[0],G=B(D.containment).offset(),F=B(E).css("overflow")!=="hidden",this.containment=[G.left+(parseInt(B(E).css("borderLeftWidth"),10)||0)+(parseInt(B(E).css("paddingLeft"),10)||0)-this.margins.left,G.top+(parseInt(B(E).css("borderTopWidth"),10)||0)+(parseInt(B(E).css("paddingTop"),10)||0)-this.margins.top,G.left+(F?Math.max(E.scrollWidth,E.offsetWidth):E.offsetWidth)-(parseInt(B(E).css("borderLeftWidth"),10)||0)-(parseInt(B(E).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,G.top+(F?Math.max(E.scrollHeight,E.offsetHeight):E.offsetHeight)-(parseInt(B(E).css("borderTopWidth"),10)||0)-(parseInt(B(E).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]);
},_convertPositionTo:function(E,H){H||(H=this.position);
var G=E==="absolute"?1:-1,D=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!B.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,F=/(html|body)/i.test(D[0].tagName);
return{top:H.top+this.offset.relative.top*G+this.offset.parent.top*G-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():F?0:D.scrollTop())*G,left:H.left+this.offset.relative.left*G+this.offset.parent.left*G-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():F?0:D.scrollLeft())*G};
},_generatePosition:function(G){var K,I,F=this.options,H=G.pageX,J=G.pageY,E=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!B.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,D=/(html|body)/i.test(E[0].tagName);
return this.cssPosition==="relative"&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(G.pageX-this.offset.click.left<this.containment[0]&&(H=this.containment[0]+this.offset.click.left),G.pageY-this.offset.click.top<this.containment[1]&&(J=this.containment[1]+this.offset.click.top),G.pageX-this.offset.click.left>this.containment[2]&&(H=this.containment[2]+this.offset.click.left),G.pageY-this.offset.click.top>this.containment[3]&&(J=this.containment[3]+this.offset.click.top)),F.grid&&(K=this.originalPageY+Math.round((J-this.originalPageY)/F.grid[1])*F.grid[1],J=this.containment?K-this.offset.click.top>=this.containment[1]&&K-this.offset.click.top<=this.containment[3]?K:K-this.offset.click.top>=this.containment[1]?K-F.grid[1]:K+F.grid[1]:K,I=this.originalPageX+Math.round((H-this.originalPageX)/F.grid[0])*F.grid[0],H=this.containment?I-this.offset.click.left>=this.containment[0]&&I-this.offset.click.left<=this.containment[2]?I:I-this.offset.click.left>=this.containment[0]?I-F.grid[0]:I+F.grid[0]:I)),{top:J-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():D?0:E.scrollTop()),left:H-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():D?0:E.scrollLeft())};
},_rearrange:function(G,E,H,F){H?H[0].appendChild(this.placeholder[0]):E.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?E.item[0]:E.item[0].nextSibling),this.counter=this.counter?++this.counter:1;
var D=this.counter;
this._delay(function(){D===this.counter&&this.refreshPositions(!F);
});
},_clear:function(E,G){this.reverting=!1;
var F,D=[];
!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;
if(this.helper[0]===this.currentItem[0]){for(F in this._storedCSS){if(this._storedCSS[F]==="auto"||this._storedCSS[F]==="static"){this._storedCSS[F]="";
}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
}else{this.currentItem.show();
}this.fromOutside&&!G&&D.push(function(H){this._trigger("receive",H,this._uiHash(this.fromOutside));
}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!G&&D.push(function(H){this._trigger("update",H,this._uiHash());
}),this!==this.currentContainer&&(G||(D.push(function(H){this._trigger("remove",H,this._uiHash());
}),D.push(function(H){return function(I){H._trigger("receive",I,this._uiHash(this));
};
}.call(this,this.currentContainer)),D.push(function(H){return function(I){H._trigger("update",I,this._uiHash(this));
};
}.call(this,this.currentContainer))));
for(F=this.containers.length-1;
F>=0;
F--){G||D.push(function(H){return function(I){H._trigger("deactivate",I,this._uiHash(this));
};
}.call(this,this.containers[F])),this.containers[F].containerCache.over&&(D.push(function(H){return function(I){H._trigger("out",I,this._uiHash(this));
};
}.call(this,this.containers[F])),this.containers[F].containerCache.over=0);
}this._storedCursor&&B("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1;
if(this.cancelHelperRemoval){if(!G){this._trigger("beforeStop",E,this._uiHash());
for(F=0;
F<D.length;
F++){D[F].call(this,E);
}this._trigger("stop",E,this._uiHash());
}return this.fromOutside=!1,!1;
}G||this._trigger("beforeStop",E,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null;
if(!G){for(F=0;
F<D.length;
F++){D[F].call(this,E);
}this._trigger("stop",E,this._uiHash());
}return this.fromOutside=!1,!0;
},_trigger:function(){B.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel();
},_uiHash:function(D){var E=D||this;
return{helper:E.helper,placeholder:E.placeholder||B([]),position:E.position,originalPosition:E.originalPosition,offset:E.positionAbs,item:E.currentItem,sender:D?D.element:null};
}});
})(jQuery);
(function(G,J){var C,A,E,K,B="ui-button ui-widget ui-state-default ui-corner-all",I="ui-state-hover ui-state-active ",H="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",F=function(){var L=G(this).find(":ui-button");
setTimeout(function(){L.button("refresh");
},1);
},D=function(M){var O=M.name,N=M.form,L=G([]);
return O&&(O=O.replace(/'/g,"\\'"),N?L=G(N).find("[name='"+O+"']"):L=G("[name='"+O+"']",M.ownerDocument).filter(function(){return !this.form;
})),L;
};
G.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,F),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");
var N=this,M=this.options,L=this.type==="checkbox"||this.type==="radio",P=L?"":"ui-state-active",O="ui-state-focus";
M.label===null&&(M.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(B).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(M.disabled){return ;
}this===C&&G(this).addClass("ui-state-active");
}).bind("mouseleave"+this.eventNamespace,function(){if(M.disabled){return ;
}G(this).removeClass(P);
}).bind("click"+this.eventNamespace,function(Q){M.disabled&&(Q.preventDefault(),Q.stopImmediatePropagation());
}),this.element.bind("focus"+this.eventNamespace,function(){N.buttonElement.addClass(O);
}).bind("blur"+this.eventNamespace,function(){N.buttonElement.removeClass(O);
}),L&&(this.element.bind("change"+this.eventNamespace,function(){if(K){return ;
}N.refresh();
}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(Q){if(M.disabled){return ;
}K=!1,A=Q.pageX,E=Q.pageY;
}).bind("mouseup"+this.eventNamespace,function(Q){if(M.disabled){return ;
}if(A!==Q.pageX||E!==Q.pageY){K=!0;
}})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(M.disabled||K){return !1;
}}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(M.disabled||K){return !1;
}G(this).addClass("ui-state-active"),N.buttonElement.attr("aria-pressed","true");
var Q=N.element[0];
D(Q).not(Q).map(function(){return G(this).button("widget")[0];
}).removeClass("ui-state-active").attr("aria-pressed","false");
}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(M.disabled){return !1;
}G(this).addClass("ui-state-active"),C=this,N.document.one("mouseup",function(){C=null;
});
}).bind("mouseup"+this.eventNamespace,function(){if(M.disabled){return !1;
}G(this).removeClass("ui-state-active");
}).bind("keydown"+this.eventNamespace,function(Q){if(M.disabled){return !1;
}(Q.keyCode===G.ui.keyCode.SPACE||Q.keyCode===G.ui.keyCode.ENTER)&&G(this).addClass("ui-state-active");
}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){G(this).removeClass("ui-state-active");
}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(Q){Q.keyCode===G.ui.keyCode.SPACE&&G(this).click();
})),this._setOption("disabled",M.disabled),this._resetButton();
},_determineButtonType:function(){var M,L,N;
this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(M=this.element.parents().last(),L="label[for='"+this.element.attr("id")+"']",this.buttonElement=M.find(L),this.buttonElement.length||(M=M.length?M.siblings():this.element.siblings(),this.buttonElement=M.filter(L),this.buttonElement.length||(this.buttonElement=M.find(L))),this.element.addClass("ui-helper-hidden-accessible"),N=this.element.is(":checked"),N&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",N)):this.buttonElement=this.element;
},widget:function(){return this.buttonElement;
},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(B+" "+I+" "+H).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title");
},_setOption:function(M,L){this._super(M,L);
if(M==="disabled"){L?this.element.prop("disabled",!0):this.element.prop("disabled",!1);
return ;
}this._resetButton();
},refresh:function(){var L=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");
L!==this.options.disabled&&this._setOption("disabled",L),this.type==="radio"?D(this.element[0]).each(function(){G(this).is(":checked")?G(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):G(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false");
}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"));
},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);
return ;
}var M=this.buttonElement.removeClass(H),P=G("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(M.empty()).text(),O=this.options.icons,L=O.primary&&O.secondary,N=[];
O.primary||O.secondary?(this.options.text&&N.push("ui-button-text-icon"+(L?"s":O.primary?"-primary":"-secondary")),O.primary&&M.prepend("<span class='ui-button-icon-primary ui-icon "+O.primary+"'></span>"),O.secondary&&M.append("<span class='ui-button-icon-secondary ui-icon "+O.secondary+"'></span>"),this.options.text||(N.push(L?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||M.attr("title",G.trim(P)))):N.push("ui-button-text-only"),M.addClass(N.join(" "));
}}),G.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset");
},_init:function(){this.refresh();
},_setOption:function(M,L){M==="disabled"&&this.buttons.button("option",M,L),this._super(M,L);
},refresh:function(){var L=this.element.css("direction")==="rtl";
this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return G(this).button("widget")[0];
}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(L?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(L?"ui-corner-left":"ui-corner-right").end().end();
},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return G(this).button("widget")[0];
}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
}});
})(jQuery);
(function(C,A){var D={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},B={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};
C.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(E){var F=C(this).css(E).offset().top;
F<0&&C(this).css("top",E.top-F);
}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&C.fn.draggable&&this._makeDraggable(),this.options.resizable&&C.fn.resizable&&this._makeResizable(),this._isOpen=!1;
},_init:function(){this.options.autoOpen&&this.open();
},_appendTo:function(){var E=this.options.appendTo;
return E&&(E.jquery||E.nodeType)?C(E):this.document.find(E||"body").eq(0);
},_destroy:function(){var F,E=this.originalPosition;
this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),F=E.parent.children().eq(E.index),F.length&&F[0]!==this.element[0]?F.before(this.element):E.parent.append(this.element);
},widget:function(){return this.uiDialog;
},disable:C.noop,enable:C.noop,close:function(E){var F=this;
if(!this._isOpen||this._trigger("beforeClose",E)===!1){return ;
}this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||C(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){F._trigger("close",E);
});
},isOpen:function(){return this._isOpen;
},moveToTop:function(){this._moveToTop();
},_moveToTop:function(F,E){var G=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;
return G&&!E&&this._trigger("focus",F),G;
},open:function(){if(this._isOpen){this._moveToTop()&&this._focusTabbable();
return ;
}this.opener=C(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._focusTabbable(),this._isOpen=!0,this._trigger("open"),this._trigger("focus");
},_focusTabbable:function(){var E=this.element.find("[autofocus]");
E.length||(E=this.element.find(":tabbable")),E.length||(E=this.uiDialogButtonPane.find(":tabbable")),E.length||(E=this.uiDialogTitlebarClose.filter(":tabbable")),E.length||(E=this.uiDialog),E.eq(0).focus();
},_keepFocus:function(E){function F(){var G=this.document[0].activeElement,H=this.uiDialog[0]===G||C.contains(this.uiDialog[0],G);
H||this._focusTabbable();
}E.preventDefault(),F.call(this),this._delay(F);
},_createWrapper:function(){this.uiDialog=C("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(F){if(this.options.closeOnEscape&&!F.isDefaultPrevented()&&F.keyCode&&F.keyCode===C.ui.keyCode.ESCAPE){F.preventDefault(),this.close(F);
return ;
}if(F.keyCode!==C.ui.keyCode.TAB){return ;
}var H=this.uiDialog.find(":tabbable"),G=H.filter(":first"),E=H.filter(":last");
F.target!==E[0]&&F.target!==this.uiDialog[0]||!!F.shiftKey?(F.target===G[0]||F.target===this.uiDialog[0])&&F.shiftKey&&(E.focus(1),F.preventDefault()):(G.focus(1),F.preventDefault());
},mousedown:function(E){this._moveToTop(E)&&this._focusTabbable();
}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")});
},_createTitlebar:function(){var E;
this.uiDialogTitlebar=C("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(F){C(F.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus();
}}),this.uiDialogTitlebarClose=C("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(F){F.preventDefault(),this.close(F);
}}),E=C("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(E),this.uiDialog.attr({"aria-labelledby":E.attr("id")});
},_title:function(E){this.options.title||E.html("&#160;"),E.text(this.options.title);
},_createButtonPane:function(){this.uiDialogButtonPane=C("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=C("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons();
},_createButtons:function(){var E=this,F=this.options.buttons;
this.uiDialogButtonPane.remove(),this.uiButtonSet.empty();
if(C.isEmptyObject(F)){this.uiDialog.removeClass("ui-dialog-buttons");
return ;
}C.each(F,function(J,I){var G,H;
I=C.isFunction(I)?{click:I,text:J}:I,I=C.extend({type:"button"},I),G=I.click,I.click=function(){G.apply(E.element[0],arguments);
},H={icons:I.icons,text:I.showText},delete I.icons,delete I.showText,C("<button></button>",I).button(H).appendTo(E.uiButtonSet);
}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog);
},_makeDraggable:function(){function F(H){return{position:H.position,offset:H.offset};
}var E=this,G=this.options;
this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(I,H){C(this).addClass("ui-dialog-dragging"),E._trigger("dragStart",I,F(H));
},drag:function(H,I){E._trigger("drag",H,F(I));
},stop:function(H,I){G.position=[I.position.left-E.document.scrollLeft(),I.position.top-E.document.scrollTop()],C(this).removeClass("ui-dialog-dragging"),E._trigger("dragStop",H,F(I));
}});
},_makeResizable:function(){function I(K){return{originalPosition:K.originalPosition,originalSize:K.originalSize,position:K.position,size:K.size};
}var F=this,J=this.options,H=J.resizable,E=this.uiDialog.css("position"),G=typeof H=="string"?H:"n,e,s,w,se,sw,ne,nw";
this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:J.maxWidth,maxHeight:J.maxHeight,minWidth:J.minWidth,minHeight:this._minHeight(),handles:G,start:function(L,K){C(this).addClass("ui-dialog-resizing"),F._trigger("resizeStart",L,I(K));
},resize:function(K,L){F._trigger("resize",K,I(L));
},stop:function(L,K){J.height=C(this).height(),J.width=C(this).width(),C(this).removeClass("ui-dialog-resizing"),F._trigger("resizeStop",L,I(K));
}}).css("position",E);
},_minHeight:function(){var E=this.options;
return E.height==="auto"?E.minHeight:Math.min(E.minHeight,E.height);
},_position:function(){var E=this.uiDialog.is(":visible");
E||this.uiDialog.show(),this.uiDialog.position(this.options.position),E||this.uiDialog.hide();
},_setOptions:function(F){var E=this,G=!1,H={};
C.each(F,function(J,I){E._setOption(J,I),J in D&&(G=!0),J in B&&(H[J]=I);
}),G&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",H);
},_setOption:function(H,F){var I,G,E=this.uiDialog;
H==="dialogClass"&&E.removeClass(this.options.dialogClass).addClass(F);
if(H==="disabled"){return ;
}this._super(H,F),H==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),H==="buttons"&&this._createButtons(),H==="closeText"&&this.uiDialogTitlebarClose.button({label:""+F}),H==="draggable"&&(I=E.is(":data(ui-draggable)"),I&&!F&&E.draggable("destroy"),!I&&F&&this._makeDraggable()),H==="position"&&this._position(),H==="resizable"&&(G=E.is(":data(ui-resizable)"),G&&!F&&E.resizable("destroy"),G&&typeof F=="string"&&E.resizable("option","handles",F),!G&&F!==!1&&this._makeResizable()),H==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"));
},_size:function(){var G,E,H,F=this.options;
this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),F.minWidth>F.width&&(F.width=F.minWidth),G=this.uiDialog.css({height:"auto",width:F.width}).outerHeight(),E=Math.max(0,F.minHeight-G),H=typeof F.maxHeight=="number"?Math.max(0,F.maxHeight-G):"none",F.height==="auto"?this.element.css({minHeight:E,maxHeight:H,height:"auto"}):this.element.height(Math.max(0,F.height-G)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight());
},_createOverlay:function(){if(!this.options.modal){return ;
}C.ui.dialog.overlayInstances||this._delay(function(){C.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(E){C(E.target).closest(".ui-dialog").length||(E.preventDefault(),C(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable());
}});
}),this.overlay=C("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),C.ui.dialog.overlayInstances++;
},_destroyOverlay:function(){if(!this.options.modal){return ;
}C.ui.dialog.overlayInstances--,C.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay.remove();
}}),C.ui.dialog.overlayInstances=0,C.uiBackCompat!==!1&&C.widget("ui.dialog",C.ui.dialog,{_position:function(){var F=this.options.position,H=[],G=[0,0],E;
if(F){if(typeof F=="string"||typeof F=="object"&&"0" in F){H=F.split?F.split(" "):[F[0],F[1]],H.length===1&&(H[1]=H[0]),C.each(["left","top"],function(J,I){+H[J]===H[J]&&(G[J]=H[J],H[J]=I);
}),F={my:H[0]+(G[0]<0?G[0]:"+"+G[0])+" "+H[1]+(G[1]<0?G[1]:"+"+G[1]),at:H.join(" ")};
}F=C.extend({},C.ui.dialog.prototype.options.position,F);
}else{F=C.ui.dialog.prototype.options.position;
}E=this.uiDialog.is(":visible"),E||this.uiDialog.show(),this.uiDialog.position(F),E||this.uiDialog.hide();
}});
})(jQuery);
(function(B,A){var C=5;
B.widget("ui.slider",B.ui.mouse,{version:"1.10.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){var E,I,G=this.options,D=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),F="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",H=[];
this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this.range=B([]),G.range&&(G.range===!0&&(G.values?G.values.length&&G.values.length!==2?G.values=[G.values[0],G.values[0]]:B.isArray(G.values)&&(G.values=G.values.slice(0)):G.values=[this._valueMin(),this._valueMin()]),this.range=B("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(G.range==="min"||G.range==="max"?" ui-slider-range-"+G.range:""))),I=G.values&&G.values.length||1;
for(E=D.length;
E<I;
E++){H.push(F);
}this.handles=D.add(B(H.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(J){J.preventDefault();
}).mouseenter(function(){G.disabled||B(this).addClass("ui-state-hover");
}).mouseleave(function(){B(this).removeClass("ui-state-hover");
}).focus(function(){G.disabled?B(this).blur():(B(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),B(this).addClass("ui-state-focus"));
}).blur(function(){B(this).removeClass("ui-state-focus");
}),this.handles.each(function(J){B(this).data("ui-slider-handle-index",J);
}),this._setOption("disabled",G.disabled),this._on(this.handles,this._handleEvents),this._refreshValue(),this._animateOff=!1;
},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy();
},_mouseCapture:function(M){var F,D,H,N,E,L,K,I,G=this,J=this.options;
return J.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),F={x:M.pageX,y:M.pageY},D=this._normValueFromMouse(F),H=this._valueMax()-this._valueMin()+1,this.handles.each(function(O){var P=Math.abs(D-G.values(O));
if(H>P||H===P&&(O===G._lastChangedValue||G.values(O)===J.min)){H=P,N=B(this),E=O;
}}),L=this._start(M,E),L===!1?!1:(this._mouseSliding=!0,this._handleIndex=E,N.addClass("ui-state-active").focus(),K=N.offset(),I=!B(M.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=I?{left:0,top:0}:{left:M.pageX-K.left-N.width()/2,top:M.pageY-K.top-N.height()/2-(parseInt(N.css("borderTopWidth"),10)||0)-(parseInt(N.css("borderBottomWidth"),10)||0)+(parseInt(N.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(M,E,D),this._animateOff=!0,!0));
},_mouseStart:function(){return !0;
},_mouseDrag:function(E){var D={x:E.pageX,y:E.pageY},F=this._normValueFromMouse(D);
return this._slide(E,this._handleIndex,F),!1;
},_mouseStop:function(D){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(D,this._handleIndex),this._change(D,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1;
},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal";
},_normValueFromMouse:function(H){var E,I,G,D,F;
return this.orientation==="horizontal"?(E=this.elementSize.width,I=H.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(E=this.elementSize.height,I=H.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),G=I/E,G>1&&(G=1),G<0&&(G=0),this.orientation==="vertical"&&(G=1-G),D=this._valueMax()-this._valueMin(),F=this._valueMin()+G*D,this._trimAlignValue(F);
},_start:function(E,D){var F={handle:this.handles[D],value:this.value()};
return this.options.values&&this.options.values.length&&(F.value=this.values(D),F.values=this.values()),this._trigger("start",E,F);
},_slide:function(H,E,I){var G,D,F;
this.options.values&&this.options.values.length?(G=this.values(E?0:1),this.options.values.length===2&&this.options.range===!0&&(E===0&&I>G||E===1&&I<G)&&(I=G),I!==this.values(E)&&(D=this.values(),D[E]=I,F=this._trigger("slide",H,{handle:this.handles[E],value:I,values:D}),G=this.values(E?0:1),F!==!1&&this.values(E,I,!0))):I!==this.value()&&(F=this._trigger("slide",H,{handle:this.handles[E],value:I}),F!==!1&&this.value(I));
},_stop:function(E,D){var F={handle:this.handles[D],value:this.value()};
this.options.values&&this.options.values.length&&(F.value=this.values(D),F.values=this.values()),this._trigger("stop",E,F);
},_change:function(E,D){if(!this._keySliding&&!this._mouseSliding){var F={handle:this.handles[D],value:this.value()};
this.options.values&&this.options.values.length&&(F.value=this.values(D),F.values=this.values()),this._lastChangedValue=D,this._trigger("change",E,F);
}},value:function(D){if(arguments.length){this.options.value=this._trimAlignValue(D),this._refreshValue(),this._change(null,0);
return ;
}return this._value();
},values:function(E,H){var G,D,F;
if(arguments.length>1){this.options.values[E]=this._trimAlignValue(H),this._refreshValue(),this._change(null,E);
return ;
}if(!arguments.length){return this._values();
}if(!B.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(E):this.value();
}G=this.options.values,D=arguments[0];
for(F=0;
F<G.length;
F+=1){G[F]=this._trimAlignValue(D[F]),this._change(null,F);
}this._refreshValue();
},_setOption:function(E,G){var F,D=0;
B.isArray(this.options.values)&&(D=this.options.values.length),B.Widget.prototype._setOption.apply(this,arguments);
switch(E){case"disabled":G?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0)):this.handles.prop("disabled",!1);
break;
case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();
break;
case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;
break;
case"values":this._animateOff=!0,this._refreshValue();
for(F=0;
F<D;
F+=1){this._change(null,F);
}this._animateOff=!1;
break;
case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;
}},_value:function(){var D=this.options.value;
return D=this._trimAlignValue(D),D;
},_values:function(F){var D,G,E;
if(arguments.length){return D=this.options.values[F],D=this._trimAlignValue(D),D;
}G=this.options.values.slice();
for(E=0;
E<G.length;
E+=1){G[E]=this._trimAlignValue(G[E]);
}return G;
},_trimAlignValue:function(F){if(F<=this._valueMin()){return this._valueMin();
}if(F>=this._valueMax()){return this._valueMax();
}var D=this.options.step>0?this.options.step:1,G=(F-this._valueMin())%D,E=F-G;
return Math.abs(G)*2>=D&&(E+=G>0?D:-D),parseFloat(E.toFixed(5));
},_valueMin:function(){return this.options.min;
},_valueMax:function(){return this.options.max;
},_refreshValue:function(){var L,F,D,H,M,E=this.options.range,K=this.options,J=this,I=this._animateOff?!1:K.animate,G={};
this.options.values&&this.options.values.length?this.handles.each(function(N){F=(J.values(N)-J._valueMin())/(J._valueMax()-J._valueMin())*100,G[J.orientation==="horizontal"?"left":"bottom"]=F+"%",B(this).stop(1,1)[I?"animate":"css"](G,K.animate),J.options.range===!0&&(J.orientation==="horizontal"?(N===0&&J.range.stop(1,1)[I?"animate":"css"]({left:F+"%"},K.animate),N===1&&J.range[I?"animate":"css"]({width:F-L+"%"},{queue:!1,duration:K.animate})):(N===0&&J.range.stop(1,1)[I?"animate":"css"]({bottom:F+"%"},K.animate),N===1&&J.range[I?"animate":"css"]({height:F-L+"%"},{queue:!1,duration:K.animate}))),L=F;
}):(D=this.value(),H=this._valueMin(),M=this._valueMax(),F=M!==H?(D-H)/(M-H)*100:0,G[this.orientation==="horizontal"?"left":"bottom"]=F+"%",this.handle.stop(1,1)[I?"animate":"css"](G,K.animate),E==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[I?"animate":"css"]({width:F+"%"},K.animate),E==="max"&&this.orientation==="horizontal"&&this.range[I?"animate":"css"]({width:100-F+"%"},{queue:!1,duration:K.animate}),E==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[I?"animate":"css"]({height:F+"%"},K.animate),E==="max"&&this.orientation==="vertical"&&this.range[I?"animate":"css"]({height:100-F+"%"},{queue:!1,duration:K.animate}));
},_handleEvents:{keydown:function(F){var H,E,G,I,D=B(F.target).data("ui-slider-handle-index");
switch(F.keyCode){case B.ui.keyCode.HOME:case B.ui.keyCode.END:case B.ui.keyCode.PAGE_UP:case B.ui.keyCode.PAGE_DOWN:case B.ui.keyCode.UP:case B.ui.keyCode.RIGHT:case B.ui.keyCode.DOWN:case B.ui.keyCode.LEFT:F.preventDefault();
if(!this._keySliding){this._keySliding=!0,B(F.target).addClass("ui-state-active"),H=this._start(F,D);
if(H===!1){return ;
}}}I=this.options.step,this.options.values&&this.options.values.length?E=G=this.values(D):E=G=this.value();
switch(F.keyCode){case B.ui.keyCode.HOME:G=this._valueMin();
break;
case B.ui.keyCode.END:G=this._valueMax();
break;
case B.ui.keyCode.PAGE_UP:G=this._trimAlignValue(E+(this._valueMax()-this._valueMin())/C);
break;
case B.ui.keyCode.PAGE_DOWN:G=this._trimAlignValue(E-(this._valueMax()-this._valueMin())/C);
break;
case B.ui.keyCode.UP:case B.ui.keyCode.RIGHT:if(E===this._valueMax()){return ;
}G=this._trimAlignValue(E+I);
break;
case B.ui.keyCode.DOWN:case B.ui.keyCode.LEFT:if(E===this._valueMin()){return ;
}G=this._trimAlignValue(E-I);
}this._slide(F,D,G);
},keyup:function(D){var E=B(D.target).data("ui-slider-handle-index");
this._keySliding&&(this._keySliding=!1,this._stop(D,E),this._change(D,E),B(D.target).removeClass("ui-state-active"));
}}});
})(jQuery);
(function(E,B){function A(){return ++F;
}function C(G){return G.hash.length>1&&decodeURIComponent(G.href.replace(D,""))===decodeURIComponent(location.href.replace(D,""));
}var F=0,D=/#.*$/;
E.widget("ui.tabs",{version:"1.10.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var G=this,H=this.options;
this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",H.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(I){E(this).is(".ui-state-disabled")&&I.preventDefault();
}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){E(this).closest("li").is(".ui-state-disabled")&&this.blur();
}),this._processTabs(),H.active=this._initialActive(),E.isArray(H.disabled)&&(H.disabled=E.unique(H.disabled.concat(E.map(this.tabs.filter(".ui-state-disabled"),function(I){return G.tabs.index(I);
}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(H.active):this.active=E(),this._refresh(),this.active.length&&this.load(H.active);
},_initialActive:function(){var G=this.options.active,I=this.options.collapsible,H=location.hash.substring(1);
if(G===null){H&&this.tabs.each(function(K,J){if(E(J).attr("aria-controls")===H){return G=K,!1;
}}),G===null&&(G=this.tabs.index(this.tabs.filter(".ui-tabs-active")));
if(G===null||G===-1){G=this.tabs.length?0:!1;
}}return G!==!1&&(G=this.tabs.index(this.tabs.eq(G)),G===-1&&(G=I?!1:0)),!I&&G===!1&&this.anchors.length&&(G=0),G;
},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):E()};
},_tabKeydown:function(H){var J=E(this.document[0].activeElement).closest("li"),I=this.tabs.index(J),G=!0;
if(this._handlePageNav(H)){return ;
}switch(H.keyCode){case E.ui.keyCode.RIGHT:case E.ui.keyCode.DOWN:I++;
break;
case E.ui.keyCode.UP:case E.ui.keyCode.LEFT:G=!1,I--;
break;
case E.ui.keyCode.END:I=this.anchors.length-1;
break;
case E.ui.keyCode.HOME:I=0;
break;
case E.ui.keyCode.SPACE:H.preventDefault(),clearTimeout(this.activating),this._activate(I);
return ;
case E.ui.keyCode.ENTER:H.preventDefault(),clearTimeout(this.activating),this._activate(I===this.options.active?!1:I);
return ;
default:return ;
}H.preventDefault(),clearTimeout(this.activating),I=this._focusNextTab(I,G),H.ctrlKey||(J.attr("aria-selected","false"),this.tabs.eq(I).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",I);
},this.delay));
},_panelKeydown:function(G){if(this._handlePageNav(G)){return ;
}G.ctrlKey&&G.keyCode===E.ui.keyCode.UP&&(G.preventDefault(),this.active.focus());
},_handlePageNav:function(G){if(G.altKey&&G.keyCode===E.ui.keyCode.PAGE_UP){return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;
}if(G.altKey&&G.keyCode===E.ui.keyCode.PAGE_DOWN){return this._activate(this._focusNextTab(this.options.active+1,!0)),!0;
}},_findNextTab:function(H,J){function G(){return H>I&&(H=0),H<0&&(H=I),H;
}var I=this.tabs.length-1;
while(E.inArray(G(),this.options.disabled)!==-1){H=J?H+1:H-1;
}return H;
},_focusNextTab:function(H,G){return H=this._findNextTab(H,G),this.tabs.eq(H).focus(),H;
},_setOption:function(H,G){if(H==="active"){this._activate(G);
return ;
}if(H==="disabled"){this._setupDisabled(G);
return ;
}this._super(H,G),H==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",G),!G&&this.options.active===!1&&this._activate(0)),H==="event"&&this._setupEvents(G),H==="heightStyle"&&this._setupHeightStyle(G);
},_tabId:function(G){return G.attr("aria-controls")||"ui-tabs-"+A();
},_sanitizeSelector:function(G){return G?G.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):"";
},refresh:function(){var G=this.options,H=this.tablist.children(":has(a[href])");
G.disabled=E.map(H.filter(".ui-state-disabled"),function(I){return H.index(I);
}),this._processTabs(),G.active===!1||!this.anchors.length?(G.active=!1,this.active=E()):this.active.length&&!E.contains(this.tablist[0],this.active[0])?this.tabs.length===G.disabled.length?(G.active=!1,this.active=E()):this._activate(this._findNextTab(Math.max(0,G.active-1),!1)):G.active=this.tabs.index(this.active),this._refresh();
},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0);
},_processTabs:function(){var G=this;
this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return E("a",this)[0];
}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=E(),this.anchors.each(function(O,L){var K,N,J,I=E(L).uniqueId().attr("id"),M=E(L).closest("li"),H=M.attr("aria-controls");
C(L)?(K=L.hash,N=G.element.find(G._sanitizeSelector(K))):(J=G._tabId(M),K="#"+J,N=G.element.find(K),N.length||(N=G._createPanel(J),N.insertAfter(G.panels[O-1]||G.tablist)),N.attr("aria-live","polite")),N.length&&(G.panels=G.panels.add(N)),H&&M.data("ui-tabs-aria-controls",H),M.attr({"aria-controls":K.substring(1),"aria-labelledby":I}),N.attr("aria-labelledby",I);
}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel");
},_getList:function(){return this.element.find("ol,ul").eq(0);
},_createPanel:function(G){return E("<div>").attr("id",G).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0);
},_setupDisabled:function(G){E.isArray(G)&&(G.length?G.length===this.anchors.length&&(G=!0):G=!1);
for(var I=0,H;
H=this.tabs[I];
I++){G===!0||E.inArray(I,G)!==-1?E(H).addClass("ui-state-disabled").attr("aria-disabled","true"):E(H).removeClass("ui-state-disabled").removeAttr("aria-disabled");
}this.options.disabled=G;
},_setupEvents:function(G){var H={click:function(I){I.preventDefault();
}};
G&&E.each(G.split(" "),function(J,I){H[I]="_eventHandler";
}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,H),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs);
},_setupHeightStyle:function(G){var I,H=this.element.parent();
G==="fill"?(I=H.height(),I-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var J=E(this),K=J.css("position");
if(K==="absolute"||K==="fixed"){return ;
}I-=J.outerHeight(!0);
}),this.element.children().not(this.panels).each(function(){I-=E(this).outerHeight(!0);
}),this.panels.each(function(){E(this).height(Math.max(0,I-E(this).innerHeight()+E(this).height()));
}).css("overflow","auto")):G==="auto"&&(I=0,this.panels.each(function(){I=Math.max(I,E(this).height("").height());
}).height(I));
},_eventHandler:function(O){var I=this.options,G=this.active,K=E(O.currentTarget),P=K.closest("li"),H=P[0]===G[0],N=H&&I.collapsible,M=N?E():this._getPanelForTab(P),L=G.length?this._getPanelForTab(G):E(),J={oldTab:G,oldPanel:L,newTab:N?E():P,newPanel:M};
O.preventDefault();
if(P.hasClass("ui-state-disabled")||P.hasClass("ui-tabs-loading")||this.running||H&&!I.collapsible||this._trigger("beforeActivate",O,J)===!1){return ;
}I.active=N?!1:this.tabs.index(P),this.active=H?E():P,this.xhr&&this.xhr.abort(),!L.length&&!M.length&&E.error("jQuery UI Tabs: Mismatching fragment identifier."),M.length&&this.load(this.tabs.index(P),O),this._toggle(O,J);
},_toggle:function(I,M){function L(){K.running=!1,K._trigger("activate",I,M);
}function G(){M.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),H.length&&K.options.show?K._show(H,K.options.show,L):(H.show(),L());
}var K=this,H=M.newPanel,J=M.oldPanel;
this.running=!0,J.length&&this.options.hide?this._hide(J,this.options.hide,function(){M.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),G();
}):(M.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),J.hide(),G()),J.attr({"aria-expanded":"false","aria-hidden":"true"}),M.oldTab.attr("aria-selected","false"),H.length&&J.length?M.oldTab.attr("tabIndex",-1):H.length&&this.tabs.filter(function(){return E(this).attr("tabIndex")===0;
}).attr("tabIndex",-1),H.attr({"aria-expanded":"true","aria-hidden":"false"}),M.newTab.attr({"aria-selected":"true",tabIndex:0});
},_activate:function(G){var I,H=this._findActive(G);
if(H[0]===this.active[0]){return ;
}H.length||(H=this.active),I=H.find(".ui-tabs-anchor")[0],this._eventHandler({target:I,currentTarget:I,preventDefault:E.noop});
},_findActive:function(G){return G===!1?E():this.tabs.eq(G);
},_getIndex:function(G){return typeof G=="string"&&(G=this.anchors.index(this.anchors.filter("[href$='"+G+"']"))),G;
},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){E.data(this,"ui-tabs-destroy")?E(this).remove():E(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role");
}),this.tabs.each(function(){var G=E(this),H=G.data("ui-tabs-aria-controls");
H?G.attr("aria-controls",H).removeData("ui-tabs-aria-controls"):G.removeAttr("aria-controls");
}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","");
},enable:function(H){var G=this.options.disabled;
if(G===!1){return ;
}H===B?G=!1:(H=this._getIndex(H),E.isArray(G)?G=E.map(G,function(I){return I!==H?I:null;
}):G=E.map(this.tabs,function(J,I){return I!==H?I:null;
})),this._setupDisabled(G);
},disable:function(H){var G=this.options.disabled;
if(G===!0){return ;
}if(H===B){G=!0;
}else{H=this._getIndex(H);
if(E.inArray(H,G)!==-1){return ;
}E.isArray(G)?G=E.merge([H],G).sort():G=[H];
}this._setupDisabled(G);
},load:function(J,M){J=this._getIndex(J);
var K=this,I=this.tabs.eq(J),L=I.find(".ui-tabs-anchor"),H=this._getPanelForTab(I),G={tab:I,panel:H};
if(C(L[0])){return ;
}this.xhr=E.ajax(this._ajaxSettings(L,M,G)),this.xhr&&this.xhr.statusText!=="canceled"&&(I.addClass("ui-tabs-loading"),H.attr("aria-busy","true"),this.xhr.success(function(N){setTimeout(function(){H.html(N),K._trigger("load",M,G);
},1);
}).complete(function(O,N){setTimeout(function(){N==="abort"&&K.panels.stop(!1,!0),I.removeClass("ui-tabs-loading"),H.removeAttr("aria-busy"),O===K.xhr&&delete K.xhr;
},1);
}));
},_ajaxSettings:function(H,J,I){var G=this;
return{url:H.attr("href"),beforeSend:function(K,L){return G._trigger("beforeLoad",J,E.extend({jqXHR:K,ajaxSettings:L},I));
}};
},_getPanelForTab:function(G){var H=E(G).attr("aria-controls");
return this.element.find(this._sanitizeSelector("#"+H));
}});
})(jQuery);




(function(C){var A=false,B=/xyz/.test(function(){xyz;
})?/\b_super\b/:/.*/;
this.Class=function(D){};
Class.extend=function(H){var G=this.prototype;
A=true;
var F=new this(H);
A=false;
for(var E in H){F[E]=typeof H[E]=="function"&&typeof G[E]=="function"&&B.test(H[E])?(function(J,K){var I=function(){var M=this._super;
this._super=G[J];
var L=K.apply(this,arguments);
this._super=M;
return L;
};
I._original=K;
return I;
})(E,H[E]):H[E];
}function D(I){if(!A){if(this.init){this.init.apply(this,arguments);
}}}D.prototype=F;
D.constructor=D;
D.extend=arguments.callee;
return D;
};
})(jQuery);
(function(A){A.fn.comp=function(){return this.each(function(){var B=this;
A.each(A(this).attr("comp").split(/\s*,\s*|\s+/),function(C,D){var D=A.trim(D);
if(Comp[D]&&A(B).data("comp")==undefined){A(B).data("comp",new Comp[D](B));
}});
});
};
A.fn.compobj=function(){return A(this).data("comp");
};
A.fn.compfind=function(B){if(B==null){return A(this).find("[sub]");
}else{return A(this).find("[sub~='"+("$"===B.charAt(0)?B.substring(1):B)+"']");
}};
A.paramBinder=function(B,C,E){function D(F){var G=F.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");
return G.length==1&&!G[0]?[]:G;
}return function(){var H=D(B._original?B._original:B);
var F=Array.prototype.slice.call(arguments);
var G=[];
A.each(H,function(I,J){if(J.charAt(0)=="$"){G.push(C.element.compfind(J));
}else{G.push(F.shift());
}});
return B.apply(C,G);
};
};
})(jQuery);
(function(B){function A(E){if(E==null){return{};
}var D={};
for(var C in E){D[C]=E[C];
}return B.extend(D,A(E.__proto__));
}this.Comp=Class.extend({init:function(H,J){var C=A(this);
this.element=B(H);
for(var I in C){if(I!="_super"&&I!="init"&&B.isFunction(this[I])){var E=B.paramBinder(this[I],this);
if(/_/.test(I)&&"$"==I.charAt(0)){var F=I.split("_");
var D=F[1];
if("$"==F[0]){this.element.bind(D,E);
}else{var G=this.element.compfind(F[0]);
G.live(D,E);
this[I]=E;
this[F[0]]=G;
}}else{this[I]=E;
}}}}});
})(jQuery);




(function(A){A.fn.rt_showMoreLink=function(C){var B=this;
var E={moreText:"More",moreItemsSelector:".show_more_item",moreLinkSelector:".show_more_link"};
var D=A.extend(E,C);
this.find(D.moreLinkSelector).html(D.moreText).click(function(F){F.preventDefault();
B.find(D.moreItemsSelector).each(function(H,I){A(I).show();
});
var G=A(F.target).parent().find(".more_ellipsis");
if(G){G.remove();
}A(F.target).remove();
});
return A(this);
};
A.fn.rt_showMoreLessLink=function(C){var B=this;
var E={moreText:"See More",lessText:"Show Less",moreItemsSelector:".show_more_item",moreLinkSelector:".show_more_link"};
var D=A.extend(E,C);
this.find(D.moreLinkSelector).html(D.moreText).toggle(function(F){B.find(D.moreItemsSelector).each(function(G,H){A(H).show();
});
A(this).html(D.lessText).addClass("less");
B.trigger("heightchanged",[A("body").height()]);
},function(F){B.find(D.moreItemsSelector).each(function(G,H){A(H).hide();
});
A(this).html(D.moreText).removeClass("less");
B.trigger("heightchanged",[A("body").height()]);
});
return A(this);
};
})(jQuery);




(function(I,F){var T=I.fn.domManip,H="_tmplitem",U=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,P={},E={},Y,X={key:0,data:{}},W=0,Q=0,G=[];
function K(b,a,d,e){var c={data:e||(a?a.data:{}),_wrap:a?a._wrap:null,tmpl:null,parent:a||null,nodes:[],calls:C,nest:B,wrap:N,html:R,update:Z};
if(b){I.extend(c,b,{nodes:[],parent:a});
}if(d){c.tmpl=d;
c._ctnt=c._ctnt||c.tmpl(I,c);
c.key=++W;
(G.length?E:P)[W]=c;
}return c;
}I.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){I.fn[a]=function(c){var f=[],j=I(c),e,g,d,k,h=this.length===1&&this[0].parentNode;
Y=P||{};
if(h&&h.nodeType===11&&h.childNodes.length===1&&j.length===1){j[b](this[0]);
f=this;
}else{for(g=0,d=j.length;
g<d;
g++){Q=g;
e=(g>0?this.clone(true):this).get();
I.fn[b].apply(I(j[g]),e);
f=f.concat(e);
}Q=0;
f=this.pushStack(f,a,j.selector);
}k=Y;
Y=null;
I.tmpl.complete(k);
return f;
};
});
I.fn.extend({tmpl:function(c,b,a){return I.tmpl(this[0],c,b,a);
},tmplItem:function(){return I.tmplItem(this[0]);
},template:function(a){return I.template(a,this[0]);
},domManip:function(c,g,h,b){if(c[0]&&c[0].nodeType){var f=I.makeArray(arguments),e=c.length,d=0,a;
while(d<e&&!(a=I.data(c[d++],"tmplItem"))){}if(e>1){f[0]=[I.makeArray(c)];
}if(a&&Q){f[2]=function(i){I.tmpl.afterManip(this,i,h);
};
}T.apply(this,f);
}else{T.apply(this,arguments);
}Q=0;
if(!Y){I.tmpl.complete(P);
}return this;
}});
I.extend({tmpl:function(c,f,e,b){var d,a=!b;
if(a){b=X;
c=I.template[c]||I.template(null,c);
E={};
}else{if(!c){c=b.tmpl;
P[b.key]=b;
b.nodes=[];
if(b.wrapped){S(b,b.wrapped);
}return I(M(b,null,b.tmpl(I,b)));
}}if(!c){return[];
}if(typeof f==="function"){f=f.call(b||{});
}if(e&&e.wrapped){S(e,e.wrapped);
}d=I.isArray(f)?I.map(f,function(g){return g?K(e,b,c,g):null;
}):[K(e,b,c,f)];
return a?I(M(b,null,d)):d;
},tmplItem:function(b){var a;
if(b instanceof I){b=b[0];
}while(b&&b.nodeType===1&&!(a=I.data(b,"tmplItem"))&&(b=b.parentNode)){}return a||X;
},template:function(b,a){if(a){if(typeof a==="string"){a=L(a);
}else{if(a instanceof I){a=a[0]||{};
}}if(a.nodeType){a=I.data(a,"tmpl")||I.data(a,"tmpl",L(a.innerHTML));
}return typeof b==="string"?(I.template[b]=a):a;
}return b?(typeof b!=="string"?I.template(null,b):(I.template[b]||I.template(null,U.test(b)?b:I(b)))):null;
},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;");
}});
I.extend(I.tmpl,{tag:{"tmpl":{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},"wrap":{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},"each":{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},"html":{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(a){P={};
},afterManip:function V(c,a,d){var b=a.nodeType===11?I.makeArray(a.childNodes):a.nodeType===1?[a]:[];
d.call(c,a);
O(b);
Q++;
}});
function M(a,e,c){var d,b=c?I.map(c,function(f){return(typeof f==="string")?(a.key?f.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+H+'="'+a.key+'" $2'):f):M(f,a,f._ctnt);
}):a;
if(e){return b;
}b=b.join("");
b.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(g,h,f,i){d=I(f).get();
O(d);
if(h){d=A(h).concat(d);
}if(i){d=d.concat(A(i));
}});
return d?d:A(b);
}function A(b){var a=document.createElement("div");
a.innerHTML=b;
return I.makeArray(a.childNodes);
}function L(a){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;"+"with($data){_.push('"+I.trim(a).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(i,c,g,d,e,j,f){var l=I.tmpl.tag[g],b,h,k;
if(!l){throw"Template command not found: "+g;
}b=l._default||[];
if(j&&!/\w$/.test(e)){e+=j;
j="";
}if(e){e=J(e);
f=f?(","+J(f)+")"):(j?")":"");
h=j?(e.indexOf(".")>-1?e+j:("("+e+").call($item"+f)):e;
k=j?h:"(typeof("+e+")==='function'?("+e+").call($item):("+e+"))";
}else{k=h=b.$1||"null";
}d=J(d);
return"');"+l[c?"close":"open"].split("$notnull_1").join(e?"typeof("+e+")!=='undefined' && ("+e+")!=null":"true").split("$1a").join(k).split("$1").join(h).split("$2").join(d?d.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(n,m,o,p){p=p?(","+p+")"):(o?")":"");
return p?("("+m+").call($item"+p):n;
}):(b.$2||""))+"_.push('";
})+"');}return _;");
}function S(b,a){b._wrap=M(b,true,I.isArray(a)?a:[U.test(a)?a:I(a).html()]).join("");
}function J(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null;
}function D(a){var b=document.createElement("div");
b.appendChild(a.cloneNode(true));
return b.innerHTML;
}function O(g){var j="_"+Q,b,a,e={},f,d,c;
for(f=0,d=g.length;
f<d;
f++){if((b=g[f]).nodeType!==1){continue;
}a=b.getElementsByTagName("*");
for(c=a.length-1;
c>=0;
c--){h(a[c]);
}h(b);
}function h(o){var l,n=o,m,i,k;
if((k=o.getAttribute(H))){while(n.parentNode&&(n=n.parentNode).nodeType===1&&!(l=n.getAttribute(H))){}if(l!==k){n=n.parentNode?(n.nodeType===11?0:(n.getAttribute(H)||0)):0;
if(!(i=P[k])){i=E[k];
i=K(i,P[n]||E[n],null,true);
i.key=++W;
P[W]=i;
}if(Q){p(k);
}}o.removeAttribute(H);
}else{if(Q&&(i=I.data(o,"tmplItem"))){p(i.key);
P[i.key]=i;
n=I.data(o.parentNode,"tmplItem");
n=n?n.key:0;
}}if(i){m=i;
while(m&&m.key!=n){m.nodes.push(o);
m=m.parent;
}delete i._ctnt;
delete i._wrap;
I.data(o,"tmplItem",i);
}function p(q){q=q+j;
i=e[q]=(e[q]||K(i,P[i.parent.key+j]||i.parent,null,true));
}}}function C(c,a,d,b){if(!c){return G.pop();
}G.push({_:c,tmpl:a,item:this,data:d,options:b});
}function B(a,c,b){return I.tmpl(I.template(a),c,b,this);
}function N(c,a){var b=c.options||{};
b.wrapped=a;
return I.tmpl(I.template(c.tmpl),c.data,b,c.item);
}function R(b,c){var a=this._wrap;
return I.map(I(I.isArray(a)?a.join(""):a).filter(b||"*"),function(d){return c?d.innerText||d.textContent:d.outerHTML||D(d);
});
}function Z(){var a=this.nodes;
I.tmpl(null,null,null,this).insertBefore(a[0]);
I(a).remove();
}})(jQuery);




Comp.Autocomplete=Comp.extend({init:function(A){this._super(A);
},$input_keyup:function(A,$input,$result,$searchBox,$submitbutton){var B=$input.val();
if(B.length>2&&this.text!=B){$submitbutton.find(".icon").removeClass("magnify").addClass("spinner");
this.text=B;
if(this.ajax!=null){this.ajax.abort();
this.ajax=null;
}this.ajax=$.ajax({url:"/search/json?q="+encodeURI(B),dataType:"html",success:function(E,C,D){if(this.url.substring(this.url.indexOf("q=")+2)==encodeURI(B)){$result.html(E);
if($result.children().size()>0){$result.show();
$searchBox.addClass("results");
}$submitbutton.find(".icon").removeClass("spinner").addClass("magnify");
}}});
}else{if(B.length<=2){if(this.ajax!=null){this.ajax.abort();
this.ajax=null;
}$result.hide();
$searchBox.removeClass("results");
$submitbutton.find(".icon").removeClass("spinner").addClass("magnify");
}}},$input_keydown:function(A,$input,$result){var B=$input.val();
switch(A.keyCode){case 13:return this.enter();
case 38:return this.select($result.find(".selected").prev(),false);
case 40:return this.select($result.find(".selected").next(),true);
}},$input_focus:function(A,$result){this.showresults(A,$result);
},$input_click:function(A,$result){this.showresults(A,$result);
},$input_blur:function(A,$result,$searchBox,$input){$result.hide();
$searchBox.removeClass("results");
},$item_mousedown:function(A){A.preventDefault();
this.select($(A.target));
this.enter();
},$item_hover:function(A){this.select($(A.target));
},$footer_hover:function(A){this.select($(A.target));
},$footer_mousedown:function(A){this.select($(A.target));
this.enter();
},$submitbutton_click:function(A){this.enter();
return false;
},enter:function($result,$input){if($input.val()!=""){var B=$result.find(".selected");
if(B.length==0){this.element.closest("form").submit();
}else{var A;
if(B.is(".footer")){A=B.find("a").attr("href");
}else{A=B.attr("href");
$input.val(B.find(".title").text());
}window.location=A;
}}return false;
},showresults:function(B,A,$searchBox){var C=$(B.target).val();
if(C&&A.children().size()>0){A.show();
$searchBox.addClass("results");
}},select:function(A,B,$result,$input){if(A.length>0){if(!A.is("li")){A=A.closest("li");
}if(A.is(".header")){return(B?this.select(A.next()):this.select(A.prev()));
}$result.find(".selected").removeClass("selected");
A.addClass("selected");
}else{if(B){return this.select($result.find("li").first().addClass("selected"),B);
}}return false;
}});




Comp.HoverTip=Comp.extend({$hover_mouseover:function(C){var B=$(C.target);
B="hover"!==B.attr("sub")?B.parents("[sub=hover]"):B;
if(B.attr("tip")){Comp.HoverTip.Sub.html(B.attr("tip"));
var A=B.offset().left;
if("below"===B.attr("tipPos")){var D=B.offset().top+B.height();
Comp.HoverTip.Element.addClass("below");
}else{var D=B.offset().top-Comp.HoverTip.Element.height()-5;
Comp.HoverTip.Element.removeClass("below");
}Comp.HoverTip.Element.css("left",A).css("top",D).show();
}},$hover_mouseout:function(A){Comp.HoverTip.Sub.html("");
Comp.HoverTip.Element.hide();
}});
$(function(){Comp.HoverTip.Element=$("#hover-tip").hide();
Comp.HoverTip.Sub=$("#hover-tip span");
});
Comp.HoverBubble=Comp.extend({init:function(B){this._super(B);
var B=this.element;
this._userId=B.data("user");
this._location=B.data("location");
this._tag=B.data("tag");
this._autohidesec=B.data("autohidesec");
this._dismissurl=B.data("dismissurl");
this._show=B.data("show");
this._target=this.element.find(".hover_bubble");
this._bubble=this.element.find(".hover_bubble_content");
var A=this._bubble.offset().left-(this._bubble.width()/2)+(this._target.width()/2);
if("below"===this._location){var C=this.element.parent().height();
}else{if("right"===this._location){A=this.element.parent().width();
var C=(this.element.parent().height()/2)-(this._bubble.height()/2)+(this._target.height()/2);
}else{var C=0-this._bubble.height();
}}this._bubble.css("top",C).css("left",A);
if(this._show){this.showBubble();
}this.element.bind("showBubble",this.showBubble);
},$close_click:function(A){this._bubble.fadeOut();
if(this._dismissurl){$.post(this._dismissurl,{"userId":this._userId,"name":this._tag});
}},$bubble_click:function(A){this._bubble.fadeOut();
},showBubble:function(){window.clearTimeout(this.showTimer);
var A=this._bubble;
this.showTimer=window.setTimeout(function(){A.fadeIn();
},500);
if(this._autohidesec&&(this._autohidesec>0)){window.clearTimeout(this.hideTimer);
this.hideTimer=window.setTimeout(function(){A.fadeOut();
},this._autohidesec*1000);
}}});




Comp.JumpList=Comp.extend({init:function(){this._super();
var B=1;
var E=2;
if(typeof window.external.msIsSiteMode!="undefined"){this.ieSiteMode=window.external;
if(this.ieSiteMode.msIsSiteMode()){if(typeof this.ieSiteMode.msIsSiteModeFirstRun!="undefined"){var C=this.ieSiteMode.msIsSiteModeFirstRun(false);
}this.updateButtons();
var D=new Date().getDay();
var A=window.sessionStorage;
if(!A.lastJumpListUpdate||A.lastJumpListUpdate!=D){A.lastJumpListUpdate=D;
this.updateJumpList();
}}}else{}},updateJumpList:function(){var A=this;
$.ajax({url:"/jumplist",dataType:"json",success:function(B){A.ieSiteMode.msSiteModeClearJumpList();
A.ieSiteMode.msSiteModeCreateJumpList("What's Hot On Rotten Tomatoes");
B=B.reverse();
$.each(B,function(C,D){A.ieSiteMode.msSiteModeAddJumpListItem(D.name,D.url,D.icon);
});
A.ieSiteMode.msSiteModeShowJumplist();
}});
},updateButtons:function(){this.fb_button=this.ieSiteMode.msSiteModeAddThumbBarButton("http://images.rottentomatoescdn.com/images/icons/facebook.ico?v=1297124586","Facebook");
this.tw_button=this.ieSiteMode.msSiteModeAddThumbBarButton("http://images.rottentomatoescdn.com/images/icons/twitter.ico","Twitter");
var B=this;
function A(C){switch(C.buttonID){case B.fb_button:window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(window.location),"facebook_share","width=500,height=350");
break;
case B.tw_button:window.open("http://twitter.com/share?url="+encodeURIComponent(window.location),"twitter_share","width=500,height=350");
break;
}}if(document.addEventListener){document.addEventListener("msthumbnailclick",A,false);
}else{if(document.attachEvent){document.attachEvent("onmsthumbnailclick",A);
}}this.ieSiteMode.msSiteModeShowThumbBar();
}});




RT.Backbone.Views.GAEvents=Backbone.View.extend({events:{"mousedown [data-ga-event]":"trackEvent"},trackEvent:function(D){var A=$(D.currentTarget).data("gaEvent").split("/");
var C=["_trackEvent"],B;
while(A.length){B=A.shift();
if(!!B){C.push(B);
}}if(C.length>=3){}}});




RT.Backbone.Views.PageHeader=Backbone.View.extend({initialize:function(){_.bindAll(this,"render");
this.listenTo(this.model,"change",this.render);
this.render();
},events:{"click #header-logout-link":"logout","click #header-existing-link":"logout","click #header-login-link":"login","click #header-disable-link":"revoke"},login:function(){dataLayer.push({"event":"Header","action":"Native login"});
if($("#loginBox").length==0){var A=$("<div id='loginBox' style='display:none;'></div>");
A.append("<iframe id='loginIframe' src='/user/account/login-iframe/' frameborder='0' scrolling='no' style='width: 700px; height: 320px;'></iframe>");
$("body").append(A);
$("#loginBox").dialog({modal:true,title:"Log In to Rotten Tomatoes",height:420,width:760,zIndex:65531,dialogClass:"rt-theme"});
}else{$("#loginBox").dialog("open");
}return false;
},logout:function(){dataLayer.push({"event":"Header","action":"Logout"});
FB.getLoginStatus(function(A){if(A.status=="connected"){FB.logout(function(B){window.location.href="/logout/";
});
}else{window.location.href="/logout/";
}});
return false;
},revoke:function(){dataLayer.push({"event":"Header","action":"Disable"});
$.post("/user/account/action/facebook-deauth/").done(function(){FB.api("/me/permissions","delete",function(A){console.log(A);
window.location.href="/logout/";
});
});
return false;
},render:function(){var B=$(this.el);
var A=this.model;
var C=A.get("userType");
console.log("Rendering page header - usertype:"+C);
if(!A.get("userType")||A.get("userType")=="anon"){$("#header-user-dropdown",B).hide();
$("#header-login-block",B).show();
}else{$("#header-user-link",B).attr("href",A.get("profileUrl"));
$("#header-user-link .user-icon",B).attr("src",A.get("thumbnailUrl"));
$("#header-user-link .user-name",B).text(A.get("firstName"));
$("#header-profile-link",B).attr("href",A.get("profileUrl"));
$("#header-account-link",B).attr("href",A.get("accountUrl"));
if(A.get("userType")=="rt-native"){$("#header-community-link",B).parent().show();
$("#header-existing-link",B).parent().hide();
}else{$("#header-community-link",B).parent().hide();
$("#header-existing-link",B).parent().show();
}$("#header-user-dropdown",B).show();
$("#header-login-block",B).hide();
}}});




