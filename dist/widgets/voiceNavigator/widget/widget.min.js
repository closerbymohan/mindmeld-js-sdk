!function(){var e=window.MM||{};e.voiceNavigator=e.voiceNavigator||{},e.loader=e.loader||{},e.loader.rootURL=e.loader.rootURL||"https://developer.expectlabs.com/public/sdks/";var t={$mm:!1,$mm_iframe:!1,is_init:!1,on_init:function(){},init:function(){var o=this,a=document.createElement("div");a.setAttribute("id","mindmeld-modal"),document.body.insertBefore(a,document.body.childNodes[0]),o.$mm=o.el(a);for(var i=document.getElementsByClassName("mm-voice-nav-init"),n=function(t){t.preventDefault(),e.voiceNavigator.showModal()},c=0;c<i.length;c++)this.el(i[c]).click(n);o.set_initialized(),o.el(window).on("message",function(e){"mindmeld"==e.data.source&&"close"==e.data.action&&t.$mm.removeClass("on")})},set_initialized:function(){this.is_init=!0,this.on_init()},postMessage:function(e,t){var o=document.getElementById("mindmeld-iframe").contentWindow;o.postMessage({action:e,source:"mindmeld",data:t},"*")},contentLoaded:function(e){var t=window,o=!1,a=!0,i=t.document,n=i.documentElement,c=i.addEventListener?"addEventListener":"attachEvent",d=i.addEventListener?"removeEventListener":"detachEvent",r=i.addEventListener?"":"on",s=function(a){("readystatechange"!=a.type||"complete"==i.readyState)&&(("load"==a.type?t:i)[d](r+a.type,s,!1),!o&&(o=!0)&&e.call(t,a.type||a))},l=function(){try{n.doScroll("left")}catch(e){return void setTimeout(l,50)}s("poll")};if("complete"==i.readyState)e.call(t,"lazy");else{if(i.createEventObject&&n.doScroll){try{a=!t.frameElement}catch(m){}a&&l()}i[c](r+"DOMContentLoaded",s,!1),i[c](r+"readystatechange",s,!1),t[c](r+"load",s,!1)}},el:function(e){return{on:function(t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,o)},click:function(e){this.on("click",e)},removeClass:function(t){e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)","g"),"$1")},addClass:function(t){e.className=e.className+" "+t},remove:function(){e.parentNode.removeChild(e)},el:function(){return e}}},convertToAbsolutePath:function(e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.host+t.pathname+t.search+t.hash}};e.voiceNavigator.showModal=function(){if(t.is_init){if(t.$mm_iframe)t.postMessage("open");else{var o=document.createElement("iframe");o.setAttribute("frameBorder","0"),o.setAttribute("id","mindmeld-iframe"),o.setAttribute("allowtransparency","true"),o.setAttribute("src",e.loader.rootURL+"widgets/voiceNavigator/modal/modal.html"),"undefined"!=typeof e&&"undefined"!=typeof e.voiceNavigator&&"undefined"!=typeof e.voiceNavigator.options&&("function"==typeof e.voiceNavigator.options.cardLayout?(e.voiceNavigator.getCardHTML=e.voiceNavigator.options.cardLayout,e.voiceNavigator.options.cardLayout="custom"):"undefined"==typeof e.voiceNavigator.options.cardLayout&&(e.voiceNavigator.options.cardLayout="default"),"undefined"!=typeof e.voiceNavigator.options.customCSSPath&&(e.voiceNavigator.options.customCSSPath=t.convertToAbsolutePath(e.voiceNavigator.options.customCSSPath)),o.setAttribute("mm-voice-navigator-options",JSON.stringify(e.voiceNavigator.options))),t.$mm_iframe=t.el(o),t.el(o).on("load",function(){if(t.postMessage("open"),t.iframe_loaded=!0,"undefined"!=typeof e.voiceNavigator.options.customCSSPath){var o=document.createElement("link");o.href=e.voiceNavigator.options.customCSSPath,o.rel="stylesheet",o.type="text/css",frames["mindmeld-iframe"].contentWindow.document.head.appendChild(o)}}),t.$mm.el().appendChild(o)}t.$mm.addClass("on")}else t.on_init=e.voiceNavigator.showModal},e.voiceNavigator.hideModal=function(){t.postMessage("close")},t.contentLoaded(function(){t.init()})}();