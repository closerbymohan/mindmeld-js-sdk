!function(){var e=window.MM||{};e.voiceNavigator=e.voiceNavigator||{};var t={$mm:!1,$mm_iframe:!1,is_init:!1,on_init:function(){},init:function(){var t=this,i=document.createElement("div");i.setAttribute("id","mindmeld-modal"),document.body.insertBefore(i,document.body.childNodes[0]),t.$mm=t.el(i);for(var o=document.getElementsByClassName("mm-voice-nav-init"),n=function(t){t.preventDefault(),e.voiceNavigator.showModal()},a=0;a<o.length;a++)this.el(o[a]).click(n);t.set_initialized()},set_initialized:function(){this.is_init=!0,this.on_init()},postMessage:function(e,t){var i=document.getElementById("mindmeld-iframe").contentWindow;i.postMessage({action:e,source:"mindmeld",data:t},"*")},contentLoaded:function(e){var t=window,i=!1,o=!0,n=t.document,a=n.documentElement,d=n.addEventListener?"addEventListener":"attachEvent",c=n.addEventListener?"removeEventListener":"detachEvent",r=n.addEventListener?"":"on",s=function(o){("readystatechange"!=o.type||"complete"==n.readyState)&&(("load"==o.type?t:n)[c](r+o.type,s,!1),!i&&(i=!0)&&e.call(t,o.type||o))},l=function(){try{a.doScroll("left")}catch(e){return void setTimeout(l,50)}s("poll")};if("complete"==n.readyState)e.call(t,"lazy");else{if(n.createEventObject&&a.doScroll){try{o=!t.frameElement}catch(m){}o&&l()}n[d](r+"DOMContentLoaded",s,!1),n[d](r+"readystatechange",s,!1),t[d](r+"load",s,!1)}},el:function(e){return{on:function(t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},click:function(e){this.on("click",e)},removeClass:function(t){e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)","g"),"$1")},addClass:function(t){e.className=e.className+" "+t},remove:function(){e.parentNode.removeChild(e)},el:function(){return e}}}};e.voiceNavigator.showModal=function(){if(t.is_init){if(t.$mm_iframe)t.postMessage("open");else{var i=document.createElement("iframe");i.setAttribute("frameBorder","0"),i.setAttribute("id","mindmeld-iframe"),i.setAttribute("allowtransparency","true"),i.setAttribute("src","./dist/modal/modal.html"),"undefined"!=typeof e&&"undefined"!=typeof e.voiceNavigator&&"undefined"!=typeof e.voiceNavigator.options&&("function"==typeof e.voiceNavigator.options.cardStyle?(e.voiceNavigator.getCardHTML=e.voiceNavigator.options.cardStyle,e.voiceNavigator.options.cardStyle="custom"):"undefined"==typeof e.voiceNavigator.options.cardStyle&&(e.voiceNavigator.options.cardStyle="default"),i.setAttribute("mm-voice-navigator-options",JSON.stringify(e.voiceNavigator.options))),t.$mm_iframe=t.el(i),t.el(i).on("load",function(){t.postMessage("open"),t.iframe_loaded=!0}),t.$mm.el().appendChild(i)}t.$mm.addClass("on")}else t.on_init=e.voiceNavigator.showModal},e.voiceNavigator.hideModal=function(){t.postMessage("close")},t.contentLoaded(function(){t.init()})}();