!function(){var t=window.MM||{};t.voiceNavigator=t.voiceNavigator||{},t.__bootstrap=t.__bootstrap||{},t.__bootstrap.rootURL=t.__bootstrap.rootURL||"https://developer.expectlabs.com/public/sdks/";var e={$mm:!1,$mm_iframe:!1,is_init:!1,on_init:function(){},init:function(){var e=this,o=document.createElement("div");o.setAttribute("id","mindmeld-modal"),document.body.insertBefore(o,document.body.childNodes[0]),e.$mm=e.el(o);for(var a=document.getElementsByClassName("mm-voice-nav-init"),i=function(e){e.preventDefault(),t.voiceNavigator.showModal()},n=0;n<a.length;n++)this.el(a[n]).click(i);e.set_initialized()},set_initialized:function(){this.is_init=!0,this.on_init()},postMessage:function(t,e){var o=document.getElementById("mindmeld-iframe").contentWindow;o.postMessage({action:t,source:"mindmeld",data:e},"*")},contentLoaded:function(t){var e=window,o=!1,a=!0,i=e.document,n=i.documentElement,c=i.addEventListener?"addEventListener":"attachEvent",r=i.addEventListener?"removeEventListener":"detachEvent",s=i.addEventListener?"":"on",d=function(a){("readystatechange"!=a.type||"complete"==i.readyState)&&(("load"==a.type?e:i)[r](s+a.type,d,!1),!o&&(o=!0)&&t.call(e,a.type||a))},l=function(){try{n.doScroll("left")}catch(t){return void setTimeout(l,50)}d("poll")};if("complete"==i.readyState)t.call(e,"lazy");else{if(i.createEventObject&&n.doScroll){try{a=!e.frameElement}catch(m){}a&&l()}i[c](s+"DOMContentLoaded",d,!1),i[c](s+"readystatechange",d,!1),e[c](s+"load",d,!1)}},el:function(t){return{on:function(e,o){t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent&&t.attachEvent("on"+e,o)},click:function(t){this.on("click",t)},removeClass:function(e){t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)","g"),"$1")},addClass:function(e){t.className=t.className+" "+e},remove:function(){t.parentNode.removeChild(t)},el:function(){return t}}},convertToAbsolutePath:function(t){var e=document.createElement("a");return e.href=t,e.protocol+"//"+e.host+e.pathname+e.search+e.hash}};t.voiceNavigator.showModal=function(){if(e.is_init){if(e.$mm_iframe)e.postMessage("open");else{var o=document.createElement("iframe");o.setAttribute("frameBorder","0"),o.setAttribute("id","mindmeld-iframe"),o.setAttribute("allowtransparency","true"),o.setAttribute("src",t.__bootstrap.rootURL+"voiceNavigator/modal/modal.html"),"undefined"!=typeof t&&"undefined"!=typeof t.voiceNavigator&&"undefined"!=typeof t.voiceNavigator.options&&("function"==typeof t.voiceNavigator.options.cardLayout?(t.voiceNavigator.getCardHTML=t.voiceNavigator.options.cardLayout,t.voiceNavigator.options.cardLayout="custom"):"undefined"==typeof t.voiceNavigator.options.cardLayout&&(t.voiceNavigator.options.cardLayout="default"),"undefined"!=typeof t.voiceNavigator.options.customCSSPath&&(t.voiceNavigator.options.customCSSPath=e.convertToAbsolutePath(t.voiceNavigator.options.customCSSPath)),o.setAttribute("mm-voice-navigator-options",JSON.stringify(t.voiceNavigator.options))),e.$mm_iframe=e.el(o),e.el(o).on("load",function(){if(e.postMessage("open"),e.iframe_loaded=!0,"undefined"!=typeof t.voiceNavigator.options.customCSSPath){var o=document.createElement("link");o.href=t.voiceNavigator.options.customCSSPath,o.rel="stylesheet",o.type="text/css",frames["mindmeld-iframe"].contentWindow.document.head.appendChild(o)}}),e.$mm.el().appendChild(o)}e.$mm.addClass("on")}else e.on_init=t.voiceNavigator.showModal},t.voiceNavigator.hideModal=function(){e.postMessage("close")},e.contentLoaded(function(){e.init()})}();